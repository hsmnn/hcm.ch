(()=>{var t,e,n=Object.create,s=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,l=(t={"node_modules/slugify/slugify.js"(t,e){var n;n=function(){var r=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ə":"E","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","ə":"e","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","Ա":"A","Բ":"B","Գ":"G","Դ":"D","Ե":"E","Զ":"Z","Է":"E'","Ը":"Y'","Թ":"T'","Ժ":"JH","Ի":"I","Լ":"L","Խ":"X","Ծ":"C'","Կ":"K","Հ":"H","Ձ":"D'","Ղ":"GH","Ճ":"TW","Մ":"M","Յ":"Y","Ն":"N","Շ":"SH","Չ":"CH","Պ":"P","Ջ":"J","Ռ":"R'","Ս":"S","Վ":"V","Տ":"T","Ր":"R","Ց":"C","Փ":"P'","Ք":"Q'","Օ":"O''","Ֆ":"F","և":"EV","ء":"a","آ":"aa","أ":"a","ؤ":"u","إ":"i","ئ":"e","ا":"a","ب":"b","ة":"h","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ى":"a","ي":"y","ً":"an","ٌ":"on","ٍ":"en","َ":"a","ُ":"u","ِ":"e","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","پ":"p","چ":"ch","ژ":"zh","ک":"k","گ":"g","ی":"y","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","–":"-","‘":"'","’":"'","“":"\\"","”":"\\"","„":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial","ﻵ":"laa","ﻷ":"laa","ﻹ":"lai","ﻻ":"la"}`),a=JSON.parse('{"bg":{"Й":"Y","Ц":"Ts","Щ":"Sht","Ъ":"A","Ь":"Y","й":"y","ц":"ts","щ":"sht","ъ":"a","ь":"y"},"de":{"Ä":"AE","ä":"ae","Ö":"OE","ö":"oe","Ü":"UE","ü":"ue","ß":"ss","%":"prozent","&":"und","|":"oder","∑":"summe","∞":"unendlich","♥":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","¢":"centavos","£":"libras","¤":"moneda","₣":"francos","∑":"suma","∞":"infinito","♥":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","¢":"centime","£":"livre","¤":"devise","₣":"franc","∑":"somme","∞":"infini","♥":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","¢":"centavo","∑":"soma","£":"libra","∞":"infinito","♥":"amor"},"uk":{"И":"Y","и":"y","Й":"Y","й":"y","Ц":"Ts","ц":"ts","Х":"Kh","х":"kh","Щ":"Shch","щ":"shch","Г":"H","г":"h"},"vi":{"Đ":"D","đ":"d"},"da":{"Ø":"OE","ø":"oe","Å":"AA","å":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"større end"},"nb":{"&":"og"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och"}}');function t(t,n){if("string"!=typeof t)throw new Error("slugify: string argument expected");var i=a[(n="string"==typeof n?{replacement:n}:n||{}).locale]||{},s=void 0===n.replacement?"-":n.replacement,e=void 0===n.trim||n.trim,t=t.normalize().split("").reduce(function(t,e){return t+(i[e]||r[e]||(e===s?" ":e)).replace(n.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return n.strict&&(t=t.replace(/[^A-Za-z0-9\s]/g,"")),t=(t=e?t.trim():t).replace(/\s+/g,s),t=n.lower?t.toLowerCase():t}return t.extend=function(t){Object.assign(r,t)},t},"object"==typeof(t=t)?(e.exports=n(),e.exports.default=n()):"function"==typeof define&&define.amd?define(n):t.slugify=n()}},function(){return e||(0,t[Object.keys(t)[0]])((e={exports:{}}).exports,e),e.exports}),v=/bookshop-live ((?<end>end)|name\((?<name>[^)]*)\) params\((?<params>[^)]*)\)).*/,_=/bookshop-live.*context\((?<context>.+)\)\s*$/,y=t=>t?t.replace(/: /g,"=").split(" ").map(t=>t.split("=")):[],w=(t,e,n)=>{var i=(e=e.replace(/^include\./,"").replace(/\[(\d+)]/g,".$1").split(".")).shift();const s=g(i,n)??i;n[n.length-1][t]=""+[s,...e].join(".")},g=(e,n)=>{for(let t=n.length-1;0<=t;t--)if(n[t][e])return n[t][e];return null},b=(t,e)=>(t=t[(e="string"==typeof e?e.replace(/\[(\d+)]/g,".$1").split("."):e).shift()])&&e.length?b(t,e):t,k=async(e,t,n,i=()=>{})=>{const s=[],r=n||[{}],a={};var o=()=>[e.data,...s.map(t=>t.scope),a];const l=(t=>{const e=t.ownerDocument??document;return e.evaluate("//comment()[contains(.,'bookshop-live')]",t,null,XPathResult.ANY_TYPE,null)})(t);let c=l.iterateNext();for(;c;){var h,d,{matches:u,contextMatches:p}={matches:(p=c).textContent.match(v),contextMatches:p.textContent.match(_)};for([h,d]of y(p?.groups.context))a[h]=await e.eval(d,o()),w(h,d,r);if(u?.groups.end)s[s.length-1].endNode=c,await i(s.pop()),r.pop();else if(u){let t={};var f,p=y(u.groups.params);r.push({});for(const[m,g]of p)"bind"===m?(f=await e.eval(g,o()))&&"object"==typeof f&&(t={...t,...f},Object.keys(f).forEach(t=>w(t,g+"."+t,r))):(t[m]=await e.eval(g,o()),w(m,g,r));s.push({startNode:c,name:u.groups.name.replace(/\/[\w-]+\..+$/,"").replace(/\..+$/,""),bindings:JSON.parse(JSON.stringify(a)),pathStack:JSON.parse(JSON.stringify(r)),scope:t,params:p})}c=l.iterateNext()}},c=class{valueOf(){}liquidMethodMissing(t){}},h=function(){return(h=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)},d=Object.prototype.toString,u=String.prototype.toLowerCase;function p(t){return"string"==typeof t}function f(t){return"function"==typeof t}function m(t){return p(t=T(t))?t:O(t)?"":String(t)}function T(t){return t instanceof c?t.valueOf():t}function x(t){return"number"==typeof t}function O(t){return null==t}function S(t){return"[object Array]"===d.call(t)}function E(t,e){for(const n in t=t||{})if(t.hasOwnProperty(n)&&!1===e(t[n],n,t))break;return t}function q(t){return t[t.length-1]}function N(t){var e=typeof t;return null!==t&&("object"==e||"function"==e)}function F(e,n,i=1){const s=[];for(let t=e;t<n;t+=i)s.push(t);return s}function L(t,e,n=" "){return j(t,e,n,(t,e)=>e+t)}function j(t,e,n,i){let s=e-(t=String(t)).length;for(;0<s--;)t=i(t,n);return t}function D(t){return t}function R(t){return t.replace(/(\w?)([A-Z])/g,(t,e,n)=>(e?e+"_":"")+n.toLowerCase())}function A(t,e){return null==t&&null==e?0:null==t?1:null==e||(t=u.call(t))<(e=u.call(e))?-1:e<t?1:0}var P=class{constructor(t,e,n,i){this.key=t,this.value=e,this.next=n,this.prev=i}},M=class{constructor(t,e=0){this.limit=t,this.size=e,this.cache={},this.head=new P("HEAD",null,null,null),this.tail=new P("TAIL",null,null,null),this.head.next=this.tail,this.tail.prev=this.head}write(t,e){this.cache[t]?this.cache[t].value=e:(e=new P(t,e,this.head.next,this.head),this.head.next.prev=e,this.head.next=e,this.cache[t]=e,this.size++,this.ensureLimit())}read(t){if(this.cache[t]){var e=this.cache[t]["value"];return this.remove(t),this.write(t,e),e}}remove(t){const e=this.cache[t];e.prev.next=e.next,e.next.prev=e.prev,delete this.cache[t],this.size--}clear(){this.head.next=this.tail,this.tail.prev=this.head,this.size=0,this.cache={}}ensureLimit(){this.size>this.limit&&this.remove(this.tail.prev.key)}};function I(t,e,s){t.length&&"/"!==q(t)&&(t+="/");const n=function(t,e){const n=document.createElement("base");n.href=t;const i=document.getElementsByTagName("head")[0];i.insertBefore(n,i.firstChild);const s=document.createElement("a");return s.href=e,e=s.href,i.removeChild(n),e}(t,e);return n.replace(/^(\w+:\/\/[^/]+)(\/[^?]+)/,(t,e,n)=>{var i=n.split("/").pop();return/\.\w+$/.test(i)?t:e+n+s})}var z=Object.freeze({resolve:I,readFile:async function(i){return new Promise((t,e)=>{const n=new XMLHttpRequest;n.onload=()=>{200<=n.status&&n.status<300?t(n.responseText):e(new Error(n.statusText))},n.onerror=()=>{e(new Error("An error occurred whilst receiving the response."))},n.open("GET",i),n.send()})},readFileSync:function(t){const e=new XMLHttpRequest;if(e.open("GET",t,!1),e.send(),e.status<200||300<=e.status)throw new Error(e.statusText);return e.responseText},exists:async function(t){return!0},existsSync:function(t){return!0}});function C(t){return t&&f(t.equals)}function $(t,e){return!U(t,e)}function U(t,e){return e.opts.jsTruthy?!t:!1===t||null==t}var B={"==":(t,e)=>C(t)?t.equals(e):C(e)?e.equals(t):t===e,"!=":(t,e)=>C(t)?!t.equals(e):C(e)?!e.equals(t):t!==e,">":(t,e)=>C(t)?t.gt(e):C(e)?e.lt(t):e<t,"<":(t,e)=>C(t)?t.lt(e):C(e)?e.gt(t):t<e,">=":(t,e)=>C(t)?t.geq(e):C(e)?e.leq(t):e<=t,"<=":(t,e)=>C(t)?t.leq(e):C(e)?e.geq(t):t<=e,contains:(t,e)=>!(!t||!f(t.indexOf))&&-1<t.indexOf(e),and:(t,e,n)=>$(t,n)&&$(e,n),or:(t,e,n)=>$(t,n)||$(e,n)},H=[0,0,0,0,0,0,0,0,0,20,4,4,4,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,2,8,0,0,0,0,8,0,0,0,64,0,65,0,0,33,33,33,33,33,33,33,33,33,33,0,0,2,2,2,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=4,Y=16;function J(t){var n,i,s={};for([n,i]of Object.entries(t)){let e=s;for(let t=0;t<n.length;t++){var r=n[t];e[r]=e[r]||{},t===n.length-1&&1&H[n.charCodeAt(t)]&&(e[r].needBoundary=!0),e=e[r]}e.handler=i,e.end=!0}return s}H[160]=H[5760]=H[6158]=H[8192]=H[8193]=H[8194]=H[8195]=H[8196]=H[8197]=H[8198]=H[8199]=H[8200]=H[8201]=H[8202]=H[8232]=H[8233]=H[8239]=H[8287]=H[12288]=V;var W={root:["."],layouts:["."],partials:["."],relativeReference:!0,cache:void 0,extname:"",fs:z,dynamicPartials:!0,jsTruthy:!1,trimTagRight:!1,trimTagLeft:!1,trimOutputRight:!1,trimOutputLeft:!1,greedy:!0,tagDelimiterLeft:"{%",tagDelimiterRight:"%}",outputDelimiterLeft:"{{",outputDelimiterRight:"}}",preserveTimezones:!1,strictFilters:!1,strictVariables:!1,lenientIf:!1,globals:{},keepOutputType:!1,operators:B,operatorsTrie:J(B)};function G(t){let e=[];return S(t)&&(e=t),p(t)&&(e=[t]),e.map(t=>I(t,".","")).map(t=>"/"!==t[t.length-1]?t+"/":t)}var Z=class extends Error{constructor(t,e){super(t.message),this.originalError=t,this.token=e,this.context=""}update(){var t=this.originalError;this.context=function(t){const[e]=t.getPosition(),n=t.input.split("\n"),i=Math.max(e-2,1),s=Math.min(e+3,n.length),r=F(i,s+1).map(t=>{return(t===e?">> ":"   ")+L(String(t),String(s).length)+"| "+n[t-1]}).join("\n");return r}(this.token),this.message=function(t,e){e.file&&(t+=", file:"+e.file);var[n,e]=e.getPosition();return t+=`, line:${n}, col:`+e}(t.message,this.token),this.stack=this.message+"\n"+this.context+"\n"+this.stack+"\nFrom "+t.stack}},Q=class extends Z{constructor(t,e){super(new Error(t),e),this.name="TokenizationError",super.update()}},K=class extends Z{constructor(t,e){super(t,e),this.name="ParseError",this.message=t.message,super.update()}},X=class extends Z{constructor(t,e){super(t,e.token),this.name="RenderError",this.message=t.message,super.update()}static is(t){return"RenderError"===t.name}},tt=class extends Z{constructor(t,e){super(t,e),this.name="UndefinedVariableError",this.message=t.message,super.update()}},et=class extends Error{constructor(t){super("undefined variable: "+t),this.name="InternalUndefinedVariableError",this.variableName=t}},nt=class extends Error{constructor(t){super(t),this.name="AssertionError",this.message=t+""}};var it,st=class{constructor(t={},e=W,n=!1){this.scopes=[{}],this.registers={},this.sync=n,this.opts=e,this.globals=e.globals,this.environments=t}getRegister(t){return this.registers[t]=this.registers[t]||{}}setRegister(t,e){return this.registers[t]=e}saveRegister(...t){return t.map(t=>[t,this.getRegister(t)])}restoreRegister(t){return t.forEach(([t,e])=>this.setRegister(t,e))}getAll(){return[this.globals,this.environments,...this.scopes].reduce((t,e)=>h(t,e),{})}get(t){var e=this.findScope(t[0]);return this.getFromScope(e,t)}getFromScope(t,e){return(e="string"==typeof e?e.split("."):e).reduce((t,e)=>{if(t=function(t,e){if(O(t))return t;if(f((t=function t(e){return e&&f(e.toLiquid)?t(e.toLiquid()):e}(t))[e]))return t[e]();if(t instanceof c)return t.hasOwnProperty(e)?t[e]:t.liquidMethodMissing(e);return"size"===e?function(t){return S(t)||p(t)?t.length:t.size}(t):"first"===e?function(t){return S(t)?t[0]:t.first}(t):"last"===e?function(t){return S(t)?t[t.length-1]:t.last}(t):t[e]}(t,e),O(t)&&this.opts.strictVariables)throw new et(e);return t},t)}push(t){return this.scopes.push(t)}pop(){return this.scopes.pop()}bottom(){return this.scopes[0]}findScope(e){for(let t=this.scopes.length-1;0<=t;t--){var n=this.scopes[t];if(e in n)return n}return e in this.environments?this.environments:this.globals}};(_e=it=it||{}).Partials="partials",_e.Layouts="layouts",_e.Root="root";var rt=class{constructor(t){this.options=t}*lookup(t,e,n,i){const s=this.options["fs"];var r=this.options[e];for(const a of this.candidates(t,r,i,e!==it.Root))if(n?s.existsSync(a):yield s.exists(a))return a;throw this.lookupError(t,r)}shouldLoadRelative(t){return this.options.relativeReference&&this.isRelativePath(t)}isRelativePath(t){return t.startsWith("./")||t.startsWith("../")}*candidates(t,e,n,i){const{fs:s,extname:r}=this.options;if(this.shouldLoadRelative(t)&&n){const a=s.resolve(this.dirname(n),t,r);for(const o of e)if(!i||a.startsWith(o))return void(yield a)}for(const l of e){const c=s.resolve(l,t,r);i&&!c.startsWith(l)||(yield c)}void 0===s.fallback||void 0!==(e=s.fallback(t))&&(yield e)}dirname(t){const e=t.split("/");return e.pop(),e.join("/")}lookupError(t,e){const n=new Error("ENOENT");return n.message=`ENOENT: Failed to lookup "${t}" in "${e}"`,n.code="ENOENT",n}},at=class{constructor(){this.buffer=""}write(t){this.buffer+=m(t)}},ot=class{constructor(){throw this.buffer="",this.stream=null,new Error("streaming not supported in browser")}};function lt(e){const t={then:t=>t(e),catch:()=>t};return t}function ct(n){const i={then:(t,e)=>e?e(n):i,catch:t=>t(n)};return i}function ht(i){return(t=i)&&f(t.then)?i:(t=i)&&f(t.next)&&f(t.throw)&&f(t.return)?function n(t){let e;try{e=i.next(t)}catch(t){return ct(t)}if(e.done)return lt(e.value);return ht(e.value).then(n,t=>{let e;try{e=i.throw(t)}catch(t){return ct(t)}return(e.done?lt:n)(e.value)})}():lt(i);var t}function dt(t){return Promise.resolve(ht(t))}function ut(t){let e;return ht(t).then(t=>(e=t,lt(e))).catch(t=>{throw t}),e}var pt,ft=class{constructor(){this.buffer=""}write(t){"string"!=typeof(t=T(t))&&""===this.buffer?this.buffer=t:this.buffer=m(this.buffer)+m(t)}},mt=class{renderTemplatesToNodeStream(t,e){const n=new ot;return Promise.resolve().then(()=>ht(this.renderTemplates(t,e,n))).then(()=>n.end(),t=>n.error(t)),n.stream}*renderTemplates(t,e,n){n=n||new(e.opts.keepOutputType?ft:at);for(const s of t)try{var i=yield s.render(e,n);if(i&&n.write(i),n.break||n.continue)break}catch(t){throw X.is(t)?t:new X(t,s)}return n.buffer}};function gt(t){return wt(t)===pt.Operator}function vt(t){return wt(t)===pt.HTML}function _t(t){return wt(t)===pt.Tag}function yt(t){return wt(t)===pt.Quoted}function wt(t){return t?t.kind:-1}(fe=pt=pt||{})[fe.Number=1]="Number",fe[fe.Literal=2]="Literal",fe[fe.Tag=4]="Tag",fe[fe.Output=8]="Output",fe[fe.HTML=16]="HTML",fe[fe.Filter=32]="Filter",fe[fe.Hash=64]="Hash",fe[fe.PropertyAccess=128]="PropertyAccess",fe[fe.Word=256]="Word",fe[fe.Range=512]="Range",fe[fe.Quoted=1024]="Quoted",fe[fe.Operator=2048]="Operator",fe[fe.Delimited=12]="Delimited";var bt=class{constructor(t,e){this.handlers={},this.stopRequested=!1,this.tokens=t,this.parseToken=e}on(t,e){return this.handlers[t]=e,this}trigger(t,e){const n=this.handlers[t];return!!n&&(n.call(this,e),!0)}start(){this.trigger("start");let t;for(;!this.stopRequested&&(t=this.tokens.shift());){var e;this.trigger("token",t)||_t(t)&&this.trigger("tag:"+t.name,t)||(e=this.parseToken(t,this.tokens),this.trigger("template",e))}return this.stopRequested||this.trigger("end"),this}stop(){return this.stopRequested=!0,this}},kt=class{constructor(t){this.token=t}};function Tt(t,e){if(!t){t=e?e():`expect ${t} to be true`;throw new nt(t)}}var xt=class extends c{equals(t){return O(T(t))}gt(){return!1}geq(){return!1}lt(){return!1}leq(){return!1}valueOf(){return null}},Ot=class extends c{equals(t){return!(t instanceof Ot)&&(p(t=T(t))||S(t)?0===t.length:!!N(t)&&0===Object.keys(t).length)}gt(){return!1}geq(){return!1}lt(){return!1}leq(){return!1}valueOf(){return""}},St=class extends Ot{equals(t){return!1===t||(!!O(T(t))||(p(t)?/^\s*$/.test(t):super.equals(t)))}},Et=new xt,qt={true:!0,false:!1,nil:Et,null:Et,empty:new Ot,blank:new St},Nt=/[\da-fA-F]/,Ft=/[0-7]/,Lt={b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v"};function jt(t){t=t.charCodeAt(0);return 97<=t?t-87:65<=t?t-55:t-48}function Dt(i){let s="";for(let n=1;n<i.length-1;n++)if("\\"===i[n])if(void 0!==Lt[i[n+1]])s+=Lt[i[++n]];else if("u"===i[n+1]){let t=0,e=n+2;for(;e<=n+5&&Nt.test(i[e]);)t=16*t+jt(i[e++]);n=e-1,s+=String.fromCharCode(t)}else if(Ft.test(i[n+1])){let t=n+1,e=0;for(;t<=n+3&&Ft.test(i[t]);)e=8*e+jt(i[t++]);n=t-1,s+=String.fromCharCode(e)}else s+=i[++n];else s+=i[n];return s}var Rt=class{constructor(t){this.postfix=[...function*(t){const e=[];for(const n of t)if(gt(n)){for(;e.length&&e[e.length-1].getPrecedence()>n.getPrecedence();)yield e.pop();e.push(n)}else yield n;for(;e.length;)yield e.pop()}(t)]}*evaluate(t,e){Tt(t,()=>"unable to evaluate: context not defined");const n=[];for(const r of this.postfix){var i,s;gt(r)?(s=yield n.pop(),i=yield n.pop(),s=function(t,e,n,i,s){const r=t[e.operator];return r(n,i,s)}(t.opts.operators,r,i,s,t),n.push(s)):n.push(yield At(r,t,e&&1===this.postfix.length))}return n[0]}};function At(t,e,n=!1){return wt(t)===pt.PropertyAccess?function(e,n,i){var t=e.props.map(t=>At(t,n,!1));try{return n.get([e.propertyName,...t])}catch(t){if(i&&"InternalUndefinedVariableError"===t.name)return null;throw new tt(t,e)}}(t,e,n):wt(t)===pt.Range?(i=e,e=At((n=t).lhs,i),i=At(n.rhs,i),F(+e,+i+1)):wt(t)===pt.Literal?qt[t.literal]:wt(t)===pt.Number?function(t){t=t.whole.content+"."+(t.decimal?t.decimal.content:"");return Number(t)}(t):wt(t)===pt.Word?t.getText():yt(t)?Pt(t):void 0;var i}function Pt(t){return Dt(t.getText())}var Mt=class{constructor(t,e,n,i,s){this.kind=t,this.input=e,this.begin=n,this.end=i,this.file=s}getText(){return this.input.slice(this.begin,this.end)}getPosition(){let[e,n]=[1,1];for(let t=0;t<this.begin;t++)"\n"===this.input[t]?(e++,n=1):n++;return[e,n]}size(){return this.end-this.begin}},It=class extends Mt{constructor(t,e,n,i,s,r,a,o){super(t,n,i,s,o),this.trimLeft=!1,this.trimRight=!1,this.content=this.getText();s="-"===e[0],o="-"===q(e);this.content=e.slice(s?1:0,o?-1:e.length).trim(),this.trimLeft=s||r,this.trimRight=o||a}};function zt(e,n){let i=!1;for(let t=0;t<e.length;t++){var s=e[t];wt(s)&pt.Delimited&&(!i&&s.trimLeft&&function(t,e){if(t&&vt(t))for(var n=e?V:Y;H[t.input.charCodeAt(t.end-1-t.trimRight)]&n;)t.trimRight++}(e[t-1],n.greedy),_t(s)&&("raw"===s.name?i=!0:"endraw"===s.name&&(i=!1)),!i&&s.trimRight&&function(t,e){if(t&&vt(t)){for(var n=e?V:Y;H[t.input.charCodeAt(t.begin+t.trimLeft)]&n;)t.trimLeft++;"\n"===t.input.charAt(t.begin+t.trimLeft)&&t.trimLeft++}}(e[t+1],n.greedy))}}var Ct=class extends Mt{constructor(t,e){super(pt.Number,t.input,t.begin,(e||t).end,t.file),this.whole=t,this.decimal=e}},$t=class extends Mt{constructor(t,e,n,i){super(pt.Word,t,e,n,i),this.input=t,this.begin=e,this.end=n,this.file=i,this.content=this.getText()}isNumber(e=!1){for(let t=e&&64&H[this.input.charCodeAt(this.begin)]?this.begin+1:this.begin;t<this.end;t++)if(!(32&H[this.input.charCodeAt(t)]))return!1;return!0}},Ut=class extends Mt{constructor(t,e,n,i){super(pt.Literal,t,e,n,i),this.input=t,this.begin=e,this.end=n,this.file=i,this.literal=this.getText()}},Bt={"==":1,"!=":1,">":1,"<":1,">=":1,"<=":1,contains:1,and:0,or:0},Ht=class extends Mt{constructor(t,e,n,i){super(pt.Operator,t,e,n,i),this.input=t,this.begin=e,this.end=n,this.file=i,this.operator=this.getText()}getPrecedence(){var t=this.getText();return t in Bt?Bt[t]:1}},Vt=class extends Mt{constructor(t,e,n){super(pt.PropertyAccess,t.input,t.begin,n,t.file),this.variable=t,this.props=e,this.propertyName=this.variable instanceof $t?this.variable.getText():Dt(this.variable.getText())}},Yt=class extends Mt{constructor(t,e,n,i,s,r){super(pt.Filter,n,i,s,r),this.name=t,this.args=e}},Jt=class extends Mt{constructor(t,e,n,i,s,r){super(pt.Hash,t,e,n,r),this.input=t,this.begin=e,this.end=n,this.name=i,this.value=s,this.file=r}},Wt=class extends Mt{constructor(t,e,n,i){super(pt.Quoted,t,e,n,i),this.input=t,this.begin=e,this.end=n,this.file=i}},Gt=class extends Mt{constructor(t,e,n,i){super(pt.HTML,t,e,n,i),this.input=t,this.begin=e,this.end=n,this.file=i,this.trimLeft=0,this.trimRight=0}getContent(){return this.input.slice(this.begin+this.trimLeft,this.end-this.trimRight)}},Zt=class extends Mt{constructor(t,e,n,i,s,r){super(pt.Range,t,e,n,r),this.input=t,this.begin=e,this.end=n,this.lhs=i,this.rhs=s,this.file=r}},Qt=class extends It{constructor(t,e,n,i,s){var{trimOutputLeft:r,trimOutputRight:a,outputDelimiterLeft:o,outputDelimiterRight:i}=i,i=t.slice(e+o.length,n-i.length);super(pt.Output,i,t,e,n,r,a,s)}};var Kt=class{constructor(t,e,n=""){this.input=t,this.trie=e,this.file=n,this.p=0,this.rawBeginAt=-1,this.N=t.length}readExpression(){return new Rt(this.readExpressionTokens())}*readExpressionTokens(){var t=this.readValue();if(t)for(yield t;this.p<this.N;){var e=this.readOperator();if(!e)return;var n=this.readValue();if(!n)return;yield e,yield n}}readOperator(){this.skipBlank();var t=function(t,e,n,i){let s=n,r=e,a;for(;s[t[r]]&&r<i;)s=s[t[r++]],s.end&&(a=s);return!a||a.needBoundary&&1&H[t.charCodeAt(r)]?-1:r}(this.input,this.p,this.trie,this.p+8);if(-1!==t)return new Ht(this.input,this.p,this.p=t,this.file)}readFilters(){const t=[];for(;;){var e=this.readFilter();if(!e)return t;t.push(e)}}readFilter(){if(this.skipBlank(),this.end())return null;Tt("|"===this.peek(),()=>"unexpected token at "+this.snapshot()),this.p++;var t=this.p;const e=this.readIdentifier();if(!e.size())return null;const n=[];if(this.skipBlank(),":"===this.peek())do{++this.p;var i=this.readFilterArg();for(i&&n.push(i);this.p<this.N&&","!==this.peek()&&"|"!==this.peek();)++this.p}while(","===this.peek());return new Yt(e.getText(),n,this.input,t,this.p,this.file)}readFilterArg(){const t=this.readValue();if(t){if(this.skipBlank(),":"!==this.peek())return t;++this.p;var e=this.readValue();return[t.getText(),e]}}readTopLevelTokens(t=W){const e=[];for(;this.p<this.N;){var n=this.readTopLevelToken(t);e.push(n)}return zt(e,t),e}readTopLevelToken(t){var{tagDelimiterLeft:e,outputDelimiterLeft:n}=t;return-1<this.rawBeginAt?this.readEndrawOrRawContent(t):this.match(e)?this.readTagToken(t):this.match(n)?this.readOutputToken(t):this.readHTMLToken(t)}readHTMLToken(t){for(var e=this.p;this.p<this.N;){var{tagDelimiterLeft:n,outputDelimiterLeft:i}=t;if(this.match(n))break;if(this.match(i))break;++this.p}return new Gt(this.input,e,this.p,this.file)}readTagToken(t=W){var{file:e,input:n}=this,i=this.p;if(-1===this.readToDelimiter(t.tagDelimiterRight))throw this.mkError(`tag ${this.snapshot(i)} not closed`,i);e=new Xt(n,i,this.p,t,e);return"raw"===e.name&&(this.rawBeginAt=i),e}readToDelimiter(t){for(;this.p<this.N;)if(8&this.peekType())this.readQuoted();else if(++this.p,this.rmatch(t))return this.p;return-1}readOutputToken(t=W){var{file:e,input:n}=this,i=t["outputDelimiterRight"],s=this.p;if(-1===this.readToDelimiter(i))throw this.mkError(`output ${this.snapshot(s)} not closed`,s);return new Qt(n,s,this.p,t,e)}readEndrawOrRawContent(t){var{tagDelimiterLeft:e,tagDelimiterRight:n}=t,i=this.p;let s=this.readTo(e)-e.length;for(;this.p<this.N;)if("endraw"===this.readIdentifier().getText())for(;this.p<=this.N;){if(this.rmatch(n)){var r=this.p;return i===s?(this.rawBeginAt=-1,new Xt(this.input,i,r,t,this.file)):(this.p=s,new Gt(this.input,i,s,this.file))}if(this.rmatch(e))break;this.p++}else s=this.readTo(e)-e.length;throw this.mkError(`raw ${this.snapshot(this.rawBeginAt)} not closed`,i)}mkError(t,e){return new Q(t,new $t(this.input,e,this.N,this.file))}snapshot(t=this.p){return JSON.stringify((e=this.input.slice(t),t=16,e.length>t?e.substr(0,t-3)+"...":e));var e}readWord(){return console.warn("Tokenizer#readWord() will be removed, use #readIdentifier instead"),this.readIdentifier()}readIdentifier(){this.skipBlank();for(var t=this.p;1&this.peekType();)++this.p;return new $t(this.input,t,this.p,this.file)}readHashes(){const t=[];for(;;){var e=this.readHash();if(!e)return t;t.push(e)}}readHash(){this.skipBlank(),","===this.peek()&&++this.p;var e=this.p;const n=this.readIdentifier();if(n.size()){let t;return this.skipBlank(),":"===this.peek()&&(++this.p,t=this.readValue()),new Jt(this.input,e,this.p,n,t,this.file)}}remaining(){return this.input.slice(this.p)}advance(t=1){this.p+=t}end(){return this.p>=this.N}readTo(t){for(;this.p<this.N;)if(++this.p,this.rmatch(t))return this.p;return-1}readValue(){var t=this.readQuoted()||this.readRange();if(t)return t;if("["===this.peek()){this.p++;t=this.readQuoted();return t?"]"!==this.peek()?void 0:(this.p++,new Vt(t,[],this.p)):void 0}const e=this.readIdentifier();if(e.size()){let t=e.isNumber(!0);const i=[];for(;;)if("["===this.peek()){t=!1,this.p++;var n=this.readValue()||new $t(this.input,this.p,this.p,this.file);this.readTo("]"),i.push(n)}else{if("."!==this.peek()||"."===this.peek(1))break;{this.p++;const s=this.readIdentifier();if(!s.size())break;s.isNumber()||(t=!1),i.push(s)}}return!i.length&&qt.hasOwnProperty(e.content)?new Ut(this.input,e.begin,e.end,this.file):t?new Ct(e,i[0]):new Vt(e,i,this.p)}}readRange(){this.skipBlank();var t=this.p;if("("===this.peek()){++this.p;var e=this.readValueOrThrow();this.p+=2;var n=this.readValueOrThrow();return++this.p,new Zt(this.input,t,this.p,e,n,this.file)}}readValueOrThrow(){var t=this.readValue();return Tt(t,()=>`unexpected token ${this.snapshot()}, value expected`),t}readQuoted(){this.skipBlank();var e=this.p;if(8&this.peekType()){++this.p;let t=!1;for(;this.p<this.N&&(++this.p,this.input[this.p-1]!==this.input[e]||t);)t?t=!1:"\\"===this.input[this.p-1]&&(t=!0);return new Wt(this.input,e,this.p,this.file)}}readFileName(){for(var t=this.p;!(this.peekType()&V)&&","!==this.peek()&&this.p<this.N;)this.p++;return new $t(this.input,t,this.p,this.file)}match(e){for(let t=0;t<e.length;t++)if(e[t]!==this.input[this.p+t])return!1;return!0}rmatch(e){for(let t=0;t<e.length;t++)if(e[e.length-1-t]!==this.input[this.p-1-t])return!1;return!0}peekType(t=0){return H[this.input.charCodeAt(this.p+t)]}peek(t=0){return this.input[this.p+t]}skipBlank(){for(;this.peekType()&V;)++this.p}},Xt=class extends It{constructor(t,e,n,i,s){var{trimTagLeft:r,trimTagRight:a,tagDelimiterLeft:o,tagDelimiterRight:l}=i,l=t.slice(e+o.length,n-l.length);super(pt.Tag,l,t,e,n,r,a,s);const c=new Kt(this.content,i.operatorsTrie);if(this.name=c.readIdentifier().getText(),!this.name)throw new Q("illegal tag syntax",this);c.skipBlank(),this.args=c.remaining()}},te=class{constructor(t){this.hash={};const e=new Kt(t,{});for(const n of e.readHashes())this.hash[n.name.content]=n.value}*render(t){const e={};for(const n of Object.keys(this.hash))e[n]=void 0===this.hash[n]||(yield At(this.hash[n],t));return e}};var ee=class{constructor(t,e,n,i){this.name=t,this.impl=e||D,this.args=n,this.liquid=i}render(t,e){const n=[];for(const i of this.args)S(i)?n.push([i[0],At(i[1],e)]):n.push(At(i,e));return this.impl.apply({context:e,liquid:this.liquid},[t,...n])}},ne=class{constructor(t,n){this.filters=[];const e=new Kt(t,n.options.operatorsTrie);this.initial=e.readExpression(),this.filters=e.readFilters().map(({name:t,args:e})=>new ee(t,n.filters.get(t),e,n))}*value(t,e){e=e||t.opts.lenientIf&&0<this.filters.length&&"default"===this.filters[0].name;let n=yield this.initial.evaluate(t,e);for(const i of this.filters)n=yield i.render(n,t);return n}},ie=class extends kt{constructor(t,e,n){super(t),this.name=t.name;var i=n.tags.get(t.name);this.impl=Object.create(i),this.impl.liquid=n,this.impl.parse&&this.impl.parse(t,e)}*render(t,e){var n=yield new te(this.token.args).render(t);const i=this.impl;if(f(i.render))return yield i.render(t,e,n)}},se=class extends kt{constructor(t,e){super(t),this.value=new ne(t.content,e)}*render(t,e){t=yield this.value.value(t,!1);e.write(t)}},re=class extends kt{constructor(t){super(t),this.str=t.getContent()}*render(t,e){e.write(this.str)}},ae=class{constructor(t){this.liquid=t,this.cache=this.liquid.options.cache,this.fs=this.liquid.options.fs,this.parseFile=this.cache?this._parseFileCached:this._parseFile,this.loader=new rt(this.liquid.options)}parse(t,e){const n=new Kt(t,this.liquid.options.operatorsTrie,e);e=n.readTopLevelTokens(this.liquid.options);return this.parseTokens(e)}parseTokens(t){var e;const n=[];for(;e=t.shift();)n.push(this.parseToken(e,t));return n}parseToken(e,t){try{return _t(e)?new ie(e,t,this.liquid):wt(e)===pt.Output?new se(e,this.liquid):new re(e)}catch(t){throw new K(t,e)}}parseStream(t){return new bt(t,(t,e)=>this.parseToken(t,e))}*_parseFileCached(t,e,n=it.Root,i){var s=this.loader.shouldLoadRelative(t)?i+","+t:n+":"+t;let r=yield this.cache.read(s);return r||(r=yield this._parseFile(t,e,n,i),this.cache.write(s,r),r)}*_parseFile(t,e,n=it.Root,i){i=yield this.loader.lookup(t,n,e,i);return this.liquid.parse(e?this.fs.readFileSync(i):yield this.fs.readFile(i),i)}},oe={parse:function(t){const e=new Kt(t.args,this.liquid.options.operatorsTrie);this.key=e.readIdentifier().content,e.skipBlank(),Tt("="===e.peek(),()=>"illegal token "+t.getText()),e.advance(),this.value=e.remaining()},render:function*(t){t.bottom()[this.key]=yield this.liquid._evalValue(this.value,t)}};function le(e){return S(e)?e:p(e)&&0<e.length?[e]:N(e)?Object.keys(e).map(t=>[t,e[t]]):[]}function ce(t){return S(t)?t:[t]}var he=class extends c{constructor(t,e,n){super(),this.i=0,this.length=t,this.name=n+"-"+e}next(){this.i++}index0(){return this.i}index(){return this.i+1}first(){return 0===this.i}last(){return this.i===this.length-1}rindex(){return this.length-this.i}rindex0(){return this.length-this.i-1}valueOf(){return JSON.stringify(this)}},de=["offset","limit","reversed"],ue={type:"block",parse:function(t,e){const n=new Kt(t.args,this.liquid.options.operatorsTrie),i=n.readIdentifier();var s=n.readIdentifier(),r=n.readValue();Tt(i.size()&&"in"===s.content&&r,()=>"illegal tag: "+t.getText()),this.variable=i.content,this.collection=r,this.hash=new te(n.remaining()),this.templates=[],this.elseTemplates=[];let a;const o=this.liquid.parser.parseStream(e).on("start",()=>a=this.templates).on("tag:else",()=>a=this.elseTemplates).on("tag:endfor",()=>o.stop()).on("template",t=>a.push(t)).on("end",()=>{throw new Error(`tag ${t.getText()} not closed`)});o.start()},render:function*(t,e){const n=this.liquid.renderer;var i=le(yield At(this.collection,t));if(i.length){const s=yield this.hash.render(t),r=this.liquid.options.orderedFilterParameters?Object.keys(s).filter(t=>de.includes(t)):de.filter(t=>void 0!==s[t]);i=r.reduce((t,e)=>{return"offset"===e?(n=t,i=s.offset,n.slice(i)):"limit"===e?(i=t,e=s.limit,i.slice(0,e)):[...t].reverse();var n,i},i);const a={forloop:new he(i.length,this.collection.getText(),this.variable)};t.push(a);for(const o of i){if(a[this.variable]=o,yield n.renderTemplates(this.templates,t,e),e.break){e.break=!1;break}e.continue=!1,a.forloop.next()}t.pop()}else yield n.renderTemplates(this.elseTemplates,t,e)}};z={parse:function(t,e){var n=new Kt(t.args,this.liquid.options.operatorsTrie);this.variable=function(t){var e=t.readIdentifier().content;if(e)return e;t=t.readQuoted();return t?Pt(t):void 0}(n),Tt(this.variable,()=>t.args+" not valid identifier"),this.templates=[];const i=this.liquid.parser.parseStream(e);i.on("tag:endcapture",()=>i.stop()).on("template",t=>this.templates.push(t)).on("end",()=>{throw new Error(`tag ${t.getText()} not closed`)}),i.start()},render:function*(t){const e=this.liquid.renderer;var n=yield e.renderTemplates(this.templates,t);t.bottom()[this.variable]=n}};B={parse:function(t,e){this.cond=new ne(t.args,this.liquid),this.cases=[],this.elseTemplates=[];let i=[];const n=this.liquid.parser.parseStream(e).on("tag:when",t=>{i=[];const e=new Kt(t.args,this.liquid.options.operatorsTrie);for(;!e.end();){var n=e.readValue();this.cases.push({val:n,templates:i}),e.readTo(",")}}).on("tag:else",()=>i=this.elseTemplates).on("tag:endcase",()=>n.stop()).on("template",t=>i.push(t)).on("end",()=>{throw new Error(`tag ${t.getText()} not closed`)});n.start()},render:function*(t,e){const n=this.liquid.renderer;var i=T(yield this.cond.value(t,t.opts.lenientIf));for(const s of this.cases)if(At(s.val,t,t.opts.lenientIf)===i)return void(yield n.renderTemplates(s.templates,t,e));yield n.renderTemplates(this.elseTemplates,t,e)}},Z={parse:function(t,e){const n=this.liquid.parser.parseStream(e);n.on("token",t=>{"endcomment"===t.name&&n.stop()}).on("end",()=>{throw new Error(`tag ${t.getText()} not closed`)}),n.start()}};(_e=ye=ye||{})[_e.OUTPUT=0]="OUTPUT",_e[_e.STORE=1]="STORE";var pe=ye,fe={parseFilePath:me,renderFilePath:ge,parse:function(t){var e=t.args;const n=new Kt(e,this.liquid.options.operatorsTrie);for(this.file=this.parseFilePath(n,this.liquid),this.currentFile=t.file;!n.end();){n.skipBlank();var i=n.p,s=n.readIdentifier();if(("with"===s.content||"for"===s.content)&&(n.skipBlank(),":"!==n.peek())){var r=n.readValue();if(r){var a=n.p;let t;"as"===n.readIdentifier().content?t=n.readIdentifier():n.p=a,this[s.content]={value:r,alias:t&&t.content},n.skipBlank(),","===n.peek()&&n.advance();continue}}n.p=i;break}this.hash=new te(n.remaining())},render:function*(t,e){const{liquid:n,hash:i}=this,s=yield this.renderFilePath(this.file,t,n);Tt(s,()=>`illegal filename "${s}"`);const r=new st({},t.opts,t.sync),a=yield i.render(t);var o,l;if(this.with&&({value:o,alias:l}=this.with,a[l||s]=At(o,t)),r.push(a),this.for){const{value:d,alias:u}=this.for;var c=le(c=At(d,t));a.forloop=new he(c.length,d.getText(),u);for(const p of c){a[u]=p;var h=yield n._parsePartialFile(s,r.sync,this.currentFile);yield n.renderer.renderTemplates(h,r,e),a.forloop.next()}}else{c=yield n._parsePartialFile(s,r.sync,this.currentFile);yield n.renderer.renderTemplates(c,r,e)}}};function me(t,e){if(e.options.dynamicPartials){const n=t.readValue();if(void 0===n)throw new TypeError(`illegal argument "${t.input}"`);if("none"===n.getText())return null;if(yt(n)){const i=e.parse(Pt(n));return 1===i.length&&vt(i[0].token)?i[0].token.getContent():i}return n}t=t.readFileName().getText();return"none"===t?null:t}function ge(t,e,n){return"string"==typeof t?t:Array.isArray(t)?n.renderer.renderTemplates(t,e):At(t,e)}var xt={parseFilePath:me,renderFilePath:ge,parse:function(t){var e=t.args;const n=new Kt(e,this.liquid.options.operatorsTrie);this.file=this.parseFilePath(n,this.liquid),this.currentFile=t.file;t=n.p;"with"===n.readIdentifier().content?(n.skipBlank(),":"!==n.peek()?this.withVar=n.readValue():n.p=t):n.p=t,this.hash=new te(n.remaining())},render:function*(t,e){const{liquid:n,hash:i,withVar:s}=this,r=n["renderer"],a=yield this.renderFilePath(this.file,t,n);Tt(a,()=>`illegal filename "${a}"`);var o=t.saveRegister("blocks","blockMode");t.setRegister("blocks",{}),t.setRegister("blockMode",pe.OUTPUT);const l=yield i.render(t);s&&(l[a]=At(s,t));var c=yield n._parsePartialFile(a,t.sync,this.currentFile);t.push(l),yield r.renderTemplates(c,t,e),t.pop(),t.restoreRegister(o)}},Et={parse:function(t){const e=new Kt(t.args,this.liquid.options.operatorsTrie);this.variable=e.readIdentifier().content},render:function(t,e){const n=t.environments;x(n[this.variable])||(n[this.variable]=0),e.write(m(--n[this.variable]))}},St={parse:function(t){const e=new Kt(t.args,this.liquid.options.operatorsTrie);var n=e.readValue();for(e.skipBlank(),this.candidates=[],n&&(":"===e.peek()?(this.group=n,e.advance()):this.candidates.push(n));!e.end();){var i=e.readValue();i&&this.candidates.push(i),e.readTo(",")}Tt(this.candidates.length,()=>"empty candidates: "+t.getText())},render:function(t,e){var n=`cycle:${At(this.group,t)}:`+this.candidates.join(",");const i=t.getRegister("cycle");let s=i[n];void 0===s&&(s=i[n]=0);var r=this.candidates[s];s=(s+1)%this.candidates.length,i[n]=s;t=At(r,t);e.write(t)}},Mt={parse:function(t,e){this.branches=[],this.elseTemplates=[];let n;this.liquid.parser.parseStream(e).on("start",()=>this.branches.push({predicate:new ne(t.args,this.liquid),templates:n=[]})).on("tag:elsif",t=>this.branches.push({predicate:new ne(t.args,this.liquid),templates:n=[]})).on("tag:else",()=>n=this.elseTemplates).on("tag:endif",function(){this.stop()}).on("template",t=>n.push(t)).on("end",()=>{throw new Error(`tag ${t.getText()} not closed`)}).start()},render:function*(t,e){const n=this.liquid.renderer;for(var{predicate:i,templates:s}of this.branches)if($(yield i.value(t,t.opts.lenientIf),t))return void(yield n.renderTemplates(s,t,e));yield n.renderTemplates(this.elseTemplates,t,e)}},It={parse:function(t){const e=new Kt(t.args,this.liquid.options.operatorsTrie);this.variable=e.readIdentifier().content},render:function(t,e){const n=t.environments;x(n[this.variable])||(n[this.variable]=0);t=n[this.variable];n[this.variable]++,e.write(m(t))}},kt={parseFilePath:me,renderFilePath:ge,parse:function(t,e){const n=new Kt(t.args,this.liquid.options.operatorsTrie);this.file=this.parseFilePath(n,this.liquid),this.currentFile=t.file,this.hash=new te(n.remaining()),this.tpls=this.liquid.parser.parseTokens(e)},render:function*(t,e){const{liquid:n,hash:i,file:s}=this,r=n["renderer"];if(null===s)return t.setRegister("blockMode",pe.OUTPUT),void(yield r.renderTemplates(this.tpls,t,e));const a=yield this.renderFilePath(this.file,t,n);Tt(a,()=>`illegal filename "${a}"`);var o=yield n._parseLayoutFile(a,t.sync,this.currentFile);t.setRegister("blockMode",pe.STORE);const l=yield r.renderTemplates(this.tpls,t),c=t.getRegister("blocks");void 0===c[""]&&(c[""]=(t,e)=>e.write(l)),t.setRegister("blockMode",pe.OUTPUT),t.push(yield i.render(t)),yield r.renderTemplates(o,t,e),t.pop()}},ve=class extends c{constructor(t=()=>""){super(),this.superBlockRender=t}super(){return this.superBlockRender()}},_e={parse(t,e){var n=/\w+/.exec(t.args);this.block=n?n[0]:"",this.tpls=[],this.liquid.parser.parseStream(e).on("tag:endblock",function(){this.stop()}).on("template",t=>this.tpls.push(t)).on("end",()=>{throw new Error(`tag ${t.getText()} not closed`)}).start()},*render(t,e){const n=this.getBlockRender(t);t.getRegister("blockMode")===pe.STORE?t.getRegister("blocks")[this.block]=n:yield n(new ve,e)},getBlockRender(n){function*i(t,e){n.push({block:t}),yield s.renderer.renderTemplates(r,n,e),n.pop()}const{liquid:s,tpls:r}=this,a=n.getRegister("blocks")[this.block];return a?(t,e)=>a(new ve(()=>i(t,e)),e):i}},ye={parse:function(t,e){this.tokens=[];const n=this.liquid.parser.parseStream(e);n.on("token",t=>{"endraw"===t.name?n.stop():this.tokens.push(t)}).on("end",()=>{throw new Error(`tag ${t.getText()} not closed`)}),n.start()},render:function(){return this.tokens.map(t=>t.getText()).join("")}},we=class extends he{constructor(t,e,n,i){super(t,n,i),this.length=t,this.cols=e}row(){return Math.floor(this.i/this.cols)+1}col0(){return this.i%this.cols}col(){return this.col0()+1}col_first(){return 0===this.col0()}col_last(){return this.col()===this.cols}},be={assign:oe,for:ue,capture:z,case:B,comment:Z,include:xt,render:fe,decrement:Et,increment:It,cycle:St,if:Mt,layout:kt,block:_e,raw:ye,tablerow:{parse:function(t,e){const n=new Kt(t.args,this.liquid.options.operatorsTrie);var i=n.readIdentifier();n.skipBlank();var s=n.readIdentifier();Tt(s&&"in"===s.content,()=>"illegal tag: "+t.getText()),this.variable=i.content,this.collection=n.readValue(),this.hash=new te(n.remaining()),this.templates=[];let r;const a=this.liquid.parser.parseStream(e).on("start",()=>r=this.templates).on("tag:endtablerow",()=>a.stop()).on("template",t=>r.push(t)).on("end",()=>{throw new Error(`tag ${t.getText()} not closed`)});a.start()},render:function*(e,n){let i=le(yield At(this.collection,e));var t=yield this.hash.render(e),s=t.offset||0,r=void 0===t.limit?i.length:t.limit;i=i.slice(s,s+r);t=t.cols||i.length;const a=this.liquid.renderer,o=new we(i.length,t,this.collection.getText(),this.variable),l={tablerowloop:o};e.push(l);for(let t=0;t<i.length;t++,o.next())l[this.variable]=i[t],0===o.col0()&&(1!==o.row()&&n.write("</tr>"),n.write(`<tr class="row${o.row()}">`)),n.write(`<td class="col${o.col()}">`),yield a.renderTemplates(this.templates,e,n),n.write("</td>");i.length&&n.write("</tr>"),e.pop()}},unless:{parse:function(t,e){this.branches=[],this.elseTemplates=[];let n;this.liquid.parser.parseStream(e).on("start",()=>this.branches.push({predicate:new ne(t.args,this.liquid),test:U,templates:n=[]})).on("tag:elsif",t=>this.branches.push({predicate:new ne(t.args,this.liquid),test:$,templates:n=[]})).on("tag:else",()=>n=this.elseTemplates).on("tag:endunless",function(){this.stop()}).on("template",t=>n.push(t)).on("end",()=>{throw new Error(`tag ${t.getText()} not closed`)}).start()},render:function*(t,e){const n=this.liquid.renderer;for(var{predicate:i,test:s,templates:r}of this.branches){i=yield i.value(t,t.opts.lenientIf);if(s(i,t))return void(yield n.renderTemplates(r,t,e))}yield n.renderTemplates(this.elseTemplates,t,e)}},break:{render:function(t,e){e.break=!0}},continue:{render:function(t,e){e.continue=!0}}},ke={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},Te={"&amp;":"&","&lt;":"<","&gt;":">","&#34;":'"',"&#39;":"'"};function xe(t){return m(t).replace(/&|<|>|"|'/g,t=>ke[t])}St=Math.abs,Mt=Math.max,kt=Math.min,_e=Math.ceil,ye=Math.floor;var Oe=/%([-_0^#:]+)?(\d+)?([EO])?(.)/,Se=["January","February","March","April","May","June","July","August","September","October","November","December"],Ee=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],qe=Se.map(Le),Ne=Ee.map(Le),Fe={1:"st",2:"nd",3:"rd",default:"th"};function Le(t){return t.slice(0,3)}function je(t){return[31,function(t){t=t.getFullYear();return!(0!=(3&t)||!(t%100||t%400==0&&t))}(t)?29:28,31,30,31,30,31,31,30,31,30,31]}function De(e){let n=0;for(let t=0;t<e.getMonth();++t)n+=je(e)[t];return n+e.getDate()}function Re(t,e){var n=De(t)+(e-t.getDay());const i=new Date(t.getFullYear(),0,1);e=7-i.getDay()+e;return String(Math.floor((n-e)/7)+1)}var Ae={d:2,e:2,H:2,I:2,j:3,k:2,l:2,L:3,m:2,M:2,S:2,U:2,W:2},Pe={a:" ",A:" ",b:" ",B:" ",c:" ",e:" ",k:" ",l:" ",p:" ",P:" "},Me={a:t=>Ne[t.getDay()],A:t=>Ee[t.getDay()],b:t=>qe[t.getMonth()],B:t=>Se[t.getMonth()],c:t=>t.toLocaleString(),C:t=>function(t){return parseInt(t.getFullYear().toString().substring(0,2),10)}(t),d:t=>t.getDate(),e:t=>t.getDate(),H:t=>t.getHours(),I:t=>String(t.getHours()%12||12),j:t=>De(t),k:t=>t.getHours(),l:t=>String(t.getHours()%12||12),L:t=>t.getMilliseconds(),m:t=>t.getMonth()+1,M:t=>t.getMinutes(),N:(t,e)=>{e=Number(e.width)||9;return j(String(t.getMilliseconds()).substr(0,e),e,"0",(t,e)=>t+e)},p:t=>t.getHours()<12?"AM":"PM",P:t=>t.getHours()<12?"am":"pm",q:t=>function(t){const e=t.getDate().toString();return t=parseInt(e.slice(-1)),Fe[t]||Fe.default}(t),s:t=>Math.round(t.valueOf()/1e3),S:t=>t.getSeconds(),u:t=>t.getDay()||7,U:t=>Re(t,0),w:t=>t.getDay(),W:t=>Re(t,1),x:t=>t.toLocaleDateString(),X:t=>t.toLocaleTimeString(),y:t=>t.getFullYear().toString().substring(2,4),Y:t=>t.getFullYear(),z:(t,e)=>{var n=Math.abs(t.getTimezoneOffset()),i=Math.floor(n/60),n=n%60;return(0<t.getTimezoneOffset()?"-":"+")+L(i,2,"0")+(e.flags[":"]?":":"")+L(n,2,"0")},t:()=>"\t",n:()=>"\n","%":()=>"%"};function Ie(t,e){let n="",i=e;for(var s;s=Oe.exec(i);)n+=i.slice(0,s.index),i=i.slice(s.index+s[0].length),n+=function(t,e){const[n,i="",s,r,a]=e,o=Me[a];if(!o)return n;const l={};for(const u of i)l[u]=!0;let c=String(o(t,{flags:l,width:s,modifier:r})),h=Pe[a]||"0",d=s||Ae[a]||0;l["^"]?c=c.toUpperCase():l["#"]&&(c=function(t){return[...t].some(t=>"a"<=t&&t<="z")?t.toUpperCase():t.toLowerCase()}(c));l._?h=" ":l[0]&&(h="0");l["-"]&&(d=0);return L(c,d,h)}(t,s);return n+i}Me.h=Me.b;var ze=(new Date).getTimezoneOffset(),Ce=/([zZ]|([+-])(\d{2}):(\d{2}))$/,$e=class extends Date{constructor(t,e){if(t instanceof $e)return t;var n=6e4*(ze-e);super(new Date(t).getTime()+n),this.timezoneOffset=e}getTimezoneOffset(){return this.timezoneOffset}static createDateFixedToTimezone(t){var e=t.match(Ce);if(e&&"Z"===e[1])return new $e(+new Date(t),0);if(e&&e[2]&&e[3]&&e[4]){var[,,n,i,e]=e,e=("+"===n?-1:1)*(60*parseInt(i,10)+parseInt(e,10));return new $e(+new Date(t),e)}return new Date(t)}};var Ue=Object.freeze({escape:xe,escapeOnce:function(t){return xe(String(t).replace(/&(amp|lt|gt|#34|#39);/g,t=>Te[t]))},newlineToBr:function(t){return t.replace(/\n/g,"<br />\n")},stripHtml:function(t){return t.replace(/<script.*?<\/script>|<!--.*?-->|<style.*?<\/style>|<.*?>/g,"")},abs:St,atLeast:Mt,atMost:kt,ceil:_e,dividedBy:(t,e)=>t/e,floor:ye,minus:(t,e)=>t-e,modulo:(t,e)=>t%e,times:(t,e)=>t*e,round:function(t,e=0){return e=Math.pow(10,e),Math.round(t*e)/e},plus:function(t,e){return Number(t)+Number(e)},sortNatural:function(t,n){return t&&t.sort?void 0!==n?[...t].sort((t,e)=>A(t[n],e[n])):[...t].sort(A):[]},urlDecode:t=>t.split("+").map(decodeURIComponent).join(" "),urlEncode:t=>t.split(" ").map(encodeURIComponent).join("+"),join:(t,e)=>t.join(void 0===e?" ":e),last:t=>S(t)?q(t):"",first:t=>S(t)?t[0]:"",reverse:t=>[...t].reverse(),sort:function(t,e){const n=t=>e?this.context.getFromScope(t,e.split(".")):t;return ce(t).sort((t,e)=>(t=n(t))<(e=n(e))?-1:e<t?1:0)},size:t=>t&&t.length||0,map:function(t,e){return ce(t).map(t=>this.context.getFromScope(t,e.split(".")))},compact:function(t){return ce(t).filter(t=>!O(t))},concat:function(t,e){return ce(t).concat(e)},slice:function(t,e,n=1){return e=e<0?t.length+e:e,t.slice(e,e+n)},where:function(t,e,n){return ce(t).filter(t=>{t=this.context.getFromScope(t,String(e).split("."));return void 0===n?$(t,this.context):t===n})},uniq:function(t){const e={};return(t||[]).filter(t=>!e.hasOwnProperty(String(t))&&(e[String(t)]=!0))},date:function(t,e){const n=this.context.opts;let i;return i="now"===t||"today"===t?new Date:x(t)?new Date(1e3*t):p(t)?/^\d+$/.test(t)?new Date(1e3*+t):n.preserveTimezones?$e.createDateFixedToTimezone(t):new Date(t):t,(s=i)instanceof Date&&!isNaN(s.getTime())?(n.hasOwnProperty("timezoneOffset")&&(i=new $e(i,n.timezoneOffset)),Ie(i,e)):t;var s},Default:function(t,e){return S(t)||p(t)?t.length?t:e:U(T(t),this.context)?e:t},json:function(t){return JSON.stringify(t)},append:function(t,e){return Tt(2===arguments.length,()=>"append expect 2 arguments"),m(t)+m(e)},prepend:function(t,e){return Tt(2===arguments.length,()=>"prepend expect 2 arguments"),m(e)+m(t)},lstrip:function(t){return m(t).replace(/^\s+/,"")},downcase:function(t){return m(t).toLowerCase()},upcase:function(t){return m(t).toUpperCase()},remove:function(t,e){return m(t).split(String(e)).join("")},removeFirst:function(t,e){return m(t).replace(String(e),"")},rstrip:function(t){return m(t).replace(/\s+$/,"")},split:function(t,e){return m(t).split(String(e))},strip:function(t){return m(t).trim()},stripNewlines:function(t){return m(t).replace(/\n/g,"")},capitalize:function(t){return(t=m(t)).charAt(0).toUpperCase()+t.slice(1).toLowerCase()},replace:function(t,e,n){return m(t).split(String(e)).join(n)},replaceFirst:function(t,e,n){return m(t).replace(String(e),n)},truncate:function(t,e=50,n="..."){return(t=m(t)).length<=e?t:t.substr(0,e-n.length)+n},truncatewords:function(t,e=15,n="..."){const i=t.split(/\s+/);let s=i.slice(0,e).join(" ");return i.length>=e&&(s+=n),s}}),Be=class{constructor(){this.impls={}}get(t){var e=this.impls[t];return Tt(e,()=>`tag "${t}" not found`),e}set(t,e){this.impls[t]=e}},He=class{constructor(t,e){this.strictFilters=t,this.liquid=e,this.impls={}}get(t){var e=this.impls[t];return Tt(e||!this.strictFilters,()=>"undefined filter: "+t),e}set(t,e){this.impls[t]=e}create(t,e){return new ee(t,this.get(t),e,this.liquid)}},Ve=class{constructor(t={}){this.options=function(t){const e=Object.assign({},W,t);return e.partials===W.partials&&(e.partials=e.root),e.layouts===W.layouts&&(e.layouts=e.root),e}(function(e){if((e=e||{}).hasOwnProperty("root")&&(e.root=G(e.root)),e.hasOwnProperty("partials")&&(e.partials=G(e.partials)),e.hasOwnProperty("layouts")&&(e.layouts=G(e.layouts)),e.hasOwnProperty("cache")){let t;t="number"==typeof e.cache?0<e.cache?new M(e.cache):void 0:"object"==typeof e.cache?e.cache:e.cache?new M(1024):void 0,e.cache=t}return e.hasOwnProperty("operators")&&(e.operatorsTrie=J(e.operators)),e}(t)),this.parser=new ae(this),this.renderer=new mt,this.filters=new He(this.options.strictFilters,this),this.tags=new Be,E(be,(t,e)=>this.registerTag(R(e),t)),E(Ue,(t,e)=>this.registerFilter(R(e),t))}parse(t,e){return this.parser.parse(t,e)}_render(t,e,n){n=new st(e,this.options,n);return this.renderer.renderTemplates(t,n)}async render(t,e){return dt(this._render(t,e,!1))}renderSync(t,e){return ut(this._render(t,e,!0))}renderToNodeStream(t,e){e=new st(e,this.options);return this.renderer.renderTemplatesToNodeStream(t,e)}_parseAndRender(t,e,n){t=this.parse(t);return this._render(t,e,n)}async parseAndRender(t,e){return dt(this._parseAndRender(t,e,!1))}parseAndRenderSync(t,e){return ut(this._parseAndRender(t,e,!0))}_parsePartialFile(t,e,n){return this.parser.parseFile(t,e,it.Partials,n)}_parseLayoutFile(t,e,n){return this.parser.parseFile(t,e,it.Layouts,n)}async parseFile(t){return dt(this.parser.parseFile(t,!1))}parseFileSync(t){return ut(this.parser.parseFile(t,!0))}async renderFile(t,e){t=await this.parseFile(t);return this.render(t,e)}renderFileSync(t,e){t=this.parseFileSync(t);return this.renderSync(t,e)}async renderFileToNodeStream(t,e){t=await this.parseFile(t);return this.renderToNodeStream(t,e)}_evalValue(t,e){const n=new ne(t,this);return n.value(e,!1)}async evalValue(t,e){return dt(this._evalValue(t,e))}evalValueSync(t,e){return ut(this._evalValue(t,e))}registerFilter(t,e){this.filters.set(t,e)}registerTag(t,e){this.tags.set(t,e)}plugin(t){return t.call(this,Ve)}express(){const i=this;let s=!0;return function(t,e,n){s&&(s=!1,i.options.root.unshift(...G(this.root))),i.renderFile(t,e).then(t=>n(null,t),n)}}};function Ye(e,n){n={isInclude:!1,expandBindSyntax:!0,liveMarkup:!0,...n},e=e.toString();const t=new Kt(e),i=t.readTopLevelTokens();i.reverse().forEach(t=>{e=function(e,t,i){let s=e.getText();if(16===e.kind)return t;if(e.name&&e.name.match(/^end/))return t;var n;if(e.name&&"include_cached"===e.name&&(s=s.replace(/include_cached/,"include")),i&&e.name&&"for"===e.name&&(s=`${s}{% loop_context ${e.args} %}`),i&&e.name&&("assign"===e.name||"local"===e.name)&&(n=e.args.split("=").shift().trim(),s+=`<!--bookshop-live context(${n}="{{${n}}}")-->`),e.name&&"bookshop_include"===e.name){let n;if(e.name="include",s=s.replace(/bookshop_include (\S+)/,(t,e)=>"include _bookshop_include_"+(n=e)),i){let t=e.args.split(" ");t.shift(),s=`<!--bookshop-live name(${n}) params(${t.join(" ").replace(/\binclude\./g,"")})-->${s}<!--bookshop-live end-->`}}if(e.name&&"bookshop"===e.name){let n;if(e.name="include",s=s.replace(/bookshop (\S+)/,(t,e)=>"include _bookshop_"+(n=e)),i){let t=e.args.split(" ");t.shift(),s=`<!--bookshop-live name(${n}) params(${t.join(" ").replace(/\binclude\./g,"")})-->${s}<!--bookshop-live end-->`}}return e.name&&e.name.match(/^include/)&&(s=s.replace(/=/g,": "),s=s.replace(/\%\s+?include\s([^"'][^\s]+)/gi,'% include "$1"')),[t.substr(0,e.begin),s,t.substr(e.end)].join("")}(t,e,n.liveMarkup)});var s=n.isInclude?"{% emulate_jekyll %}":"";return(n.expandBindSyntax?"{% unbind %}":"")+s+e}function Je(t){this.registerTag("highlight",{parse:function(t,e){this.lang=t.args.split(" ")[0],this.contents=[];const n=this.liquid.parser.parseStream(e).on("tag:endhighlight",()=>n.stop()).on("template",t=>this.contents.push(t)).on("end",()=>{throw new Error(`tag ${t.raw} not closed`)});n.start()},render:function*(t,e){const n=this.liquid.renderer;t=yield n.renderTemplates(this.contents,t);return`<figure class="highlight">
    <pre>
        <code${this.lang?` class="language-${this.lang}" data-lang="${this.lang}"`:""}>
            ${t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}
        </code>
    </pre>
</figure>`}})}function We(t){this.registerFilter("jsonify",t=>JSON.stringify(t))}var Ge,Ze,Qe=(Ge=l(),((e,n,i)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let t of a(n))o.call(e,t)||"default"===t||s(e,t,{get:()=>n[t],enumerable:!(i=r(n,t))||i.enumerable});return e})((Ze=s(null!=Ge?n(i(Ge)):{},"default",Ge&&Ge.__esModule&&"default"in Ge?{get:()=>Ge.default,enumerable:!0}:{value:Ge,enumerable:!0}),s(Ze,"__esModule",{value:!0})),Ge));function Ke(t){this.registerFilter("slugify",t=>t&&"string"==typeof t?(0,Qe.default)(t).toLowerCase():t)}function Xe(t){this.registerTag("unbind",{parse:function(t){},render:function(t,e){var n=t.scopes.length-1;return"object"==typeof t.scopes[n].bind&&(t.scopes[n]={...t.scopes[n].bind,...t.scopes[n],bind:null}),""}})}function tn(t){this.registerTag("loop_context",{parse:function(t){this.args=t.args},render:function(t,e){return`<!--bookshop-live context(${this.args.replace(/\binclude\./g,"").replace(/\s+in\s+/,"=").split(" ")[0]}[${t.get(["forloop","index0"])}])-->`}})}function en(t){this.registerTag("emulate_jekyll",{parse:function(t){},render:function(t,e){var n=t.scopes.length-1;return t.scopes[n]={include:t.scopes[n]},""}})}function nn(t){this.registerTag("local",{parse:function(t){const e=new Kt(t.args,this.liquid.options.operatorsTrie);this.key=e.readIdentifier().content,e.skipBlank(),Tt("="===e.peek(),()=>"illegal token "+t.getText()),e.advance(),this.value=e.remaining()},render:function(t){t.scopes[t.scopes.length-1][this.key]=this.liquid.evalValueSync(this.value,t)}})}ye={"components/author-card/author-card.jekyll.html":'{% assign c = "c-author-card" %}\n{% assign author_path = page.author_staff_member | prepend: "/staff_members/" | append: "/" %}\n{% assign author = site.staff_members | where: "url", author_path | first %}\n<div class="{{c}}__inner-wrapper">\n\t<h4 class="{{c}}__heading">Meet the author</h4>\n\t{% if author.twitter %}\n\t\t<a class="{{c}}__content"\n\t\t\thref="https://twitter.com/{{ author.twitter }}">\n\t{% else %}\n\t\t<div class="{{c}}__content">\n\t{% endif %}\n\t\t<div class="{{c}}__top">\n\t\t\t<img class="{{c}}__image" \n\t\t\t\t src="{{ author.image }}" \n\t\t\t\t alt="{{ author.name }}" />\n\t\t\t<div class="{{c}}__details">\n\t\t\t\t<p class="{{c}}__name">{{ author.name }}</p>\n\t\t\t\t{% if author.position %}\n\t\t\t\t\t<p class="{{c}}__role">{{ author.position }}</p>\n\t\t\t\t{% endif %}\n\t\t\t\t{% if author.phone %}\n\t\t\t\t\t<p class="{{c}}__phone"><a href="tel:{{ author.phone }}">{{ author.phone }}</a> ext {{ author.phone_extension }}</p>\n\t\t\t\t{% endif %}\n\t\t\t</div>\n\t\t</div>\n\t\t<p class="{{c}}__text">{{ author.blurb }}</p>\n\t{% if author.twitter %}\n\t\t</a>\n\t{% else %}\n\t\t</div>\n\t{% endif %}\n</div>'};ye["components/button/button.jekyll.html"]=`{% assign n = "n-button" %}
{% comment %}
The variable n is used for nested elements. This is to ensure
the parent component's class variable isn't overridden for any
items below
{% endcomment %}

{% unless include.submit %}
	<a class="{{n}}
			  {{n}}--{{ include.variant | slugify | default: 'filled' }}"
		href="{{ include.link_url }}"
		{% if include.open_in_new_tab %}
			target="_blank"
		{% endif %}>
		<span class="{{n}}__label">{{ include.label }}</span>
	</a>
{% else %}
	{% if include.label %}
		{% assign label = include.label %}
	{% else %}
		{% assign label = "Send Message" %}
	{% endif %}
	<div class="{{n}}
				{{n}}--{{ include.variant | slugify | default: 'filled' }}">
		<input class="{{n}}__label"
			   type="submit" 
			   value="{{ label }}" />
	</div>
{% endunless %}`,ye["components/call-to-action-mailing-list/call-to-action-mailing-list.jekyll.html"]=`<div class="{{c}}__inner-wrapper
			component">
	<h2 class="{{c}}__heading">{{ include.heading }}</h2>
	<p class="{{c}}__content">
		{{ include.lower_text }}
	</p>
	<form class="{{c}}__mailing-list"
		  action="{{ include.submit_success_url }}" 
		  method="post">
		<input type="hidden" 
			   name="_to" 
			   value="{{ include.form_submission_email }}" />
		<input class="{{c}}__email-input"
			   type="email" 
			   name="email" 
			   id="email" 
			   placeholder="Email" 
			   required />
		<input type="text" 
			   name="_gotcha" 
			   style="display: none;">
		{% bookshop button 
					label='Sign up'
					variant='Filled'
					submit=true %}
	</form>
</div>`,ye["components/call-to-action/call-to-action.jekyll.html"]='<div class="{{c}}__inner-wrapper\n\t\t\tcomponent">\n\t<div class="{{c}}__content">\n\t\t{{ include.heading_html }}\n\t</div>\n\t{% if include.button_label %}\n\t\t{% bookshop button \n\t\t\tlabel=include.button_label\n\t\t\tvariant=include.button_variant\n\t\t\tlink_url=include.button_link_url %}\n\t{% endif %}\n</div>',ye["components/contact-cards/contact-cards.jekyll.html"]='<div class="{{c}}__inner-wrapper\n\t\t\tcomponent">\n\t<div class="{{c}}__content">\n\t\t<h2>{{ include.heading }}</h2>\n\t\t{{ include.content_html }}\n\t</div>\n\t<div class="{{c}}__cards">\n\t\t{% for card in include.contacts %}\n\t\t\t<div class="{{c}}__card">\n\t\t\t\t<div class="{{c}}__details-wrapper">\n\t\t\t\t\t<img src="{{ card.image }}" alt="{{ card.name }}" />\n\t\t\t\t\t<div class="{{c}}__details">\n\t\t\t\t\t\t<h3 class="{{c}}__name">{{ card.name }}</h3>\n\t\t\t\t\t\t<p class="{{c}}__role">{{ card.role }}</p>\n\t\t\t\t\t\t<p class="{{c}}__number">\n\t\t\t\t\t\t\t<a href="tel:{{ card.phone }}">{{ card.phone }}</a>{% if card.phone_extension_number %} ext {{ card.phone_extension_number }}{% endif %}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<p class="{{c}}__description">{{ card.description }}</p>\n\t\t\t</div>\n\t\t{% endfor %}\n\t</div>\n</div>',ye["components/contact-form/contact-form.jekyll.html"]=`<div class="{{c}}__inner-wrapper
			component">
	{% assign heading = include.heading | size %}
	{% if heading > 3 %}
		<h2 class="{{c}}__main-heading">{{ include.heading }}</h2>
	{% endif %}
	{% assign lower = include.lower_text | size %}
	{% if lower > 3 %}
		<p class="{{c}}__lower-text">{{ include.lower_text }}</p>
	{% endif %}

	<div class="{{c}}__form-wrapper">
		<form class="{{c}}__form"
			  action="/contact-success/" 
			  method="post">
			<input type="hidden" 
				   name="_to" 
				   value="{{ include.form_submission_email }}" />
			<input type="text" 
				   name="_gotcha" 
				   style="display: none;">

			<label for="name">Full Name</label>
			<input type="text" 
				   name="name" id="name" 
				   placeholder="Enter your name..." />

			<label for="email">Email Address</label>
			<input type="email" 
				   name="email" 
				   id="email" 
				   placeholder="Enter your email..." 
				   required />

			<label for="message">Message</label>
			<textarea name="message" 
				   id="message" 
				   placeholder="Enter your message..."></textarea>
			{% bookshop button 
						label='Send Message'
						variant='Filled'
						submit=true %}
		</form>
		<div class="{{c}}__details">
			{% assign address = include.company_details.address | size %}
			{% if address > 4 %}
				<h3 class="{{c}}__heading">Address</h3>
				<address class="{{c}}__detail">
					<a target="_blank" 
					   href="https://www.google.com/maps/place/{{ include.company_details.address | url_encode }}">{{ include.company_details.address | replace: ", ", ", <br>" }}</a>
				</address>
			{% endif %}

			{% assign postal = include.company_details.postal_address | size %}
			{% if postal > 4 %}
				<h3 class="{{c}}__heading">Postal Address</h3>
				<address class="{{c}}__detail">
					<a target="_blank" 
					   href="https://www.google.com/maps/place/{{ include.company_details.postal_address | url_encode }}">{{ include.company_details.postal_address | replace: ", ", ", <br>" }}</a>
				</address>
			{% endif %}

			{% assign email = include.company_details.email | size %}
			{% if email > 4 %}
				<h3 class="{{c}}__heading">Email Address</h3>
				<p class="{{c}}__detail {{c}}__detail--no-margin">
					<a href="mailto:{{ include.company_details.email }}">{{ include.company_details.email }}</a>
				</p>
			{% endif %}

			{% assign phone = include.company_details.phone | size %}
			{% if phone > 4 %}
				<h3 class="{{c}}__heading">Phone Number</h3>
				<p class="{{c}}__detail {{c}}__detail--no-margin">
					<a href="tel:{{ include.company_details.phone }}">{{ include.company_details.phone }}</a>
				</p>
			{% endif %}
		</div>
	</div>
</div>
`,ye["components/content/content.jekyll.html"]='<div class="{{c}}__inner-wrapper\n            component">\n    <div class="{{c}}__content-wrapper">\n        {{ include.content_html }}\n    </div>\n</div>',ye["components/divider/divider.jekyll.html"]='{% if include.display_divider %}\n\t<div class="{{c}}__inner-wrapper\n\t\t\t\tcomponent">\n\t\t<div class="{{c}}__divider"></div>\n\t</div>\n{% endif %}',ye["components/frequently-asked-questions/frequently-asked-questions.jekyll.html"]='<div class="{{c}}__inner-wrapper\n\t\t\tcomponent">\n\t<h2 class="{{c}}__heading">{{ include.heading }}</h2>\n\t<div class="{{c}}__items">\n\t\t{% for item in include.questions %}\n\t\t\t<div class="{{c}}__question">\n\t\t\t\t<dt>{{ item.question_text }}</dt>\n\t\t\t\t<dd>{{ item.answer_text }}</dd>\n\t\t\t</div>\n\t\t{% endfor %}\n\t</div>\n</div>\n',ye["components/gallery/gallery.jekyll.html"]=`<div class="{{c}}__inner-wrapper
			{% if include.content_arrangement == 'Right' %}
			{{c}}__inner-wrapper--right
			{% endif %}
			component">
	{% if include.details.show_details %}
		{% assign item_number = include.gallery_items | size %}
		<div class="{{c}}__details
					{% if item_number < 3 %}
					{{c}}__details--with-details-stacked
					{% endif %}">
			<h3>{{ include.details.heading }}</h3>
			<p>{{ include.details.subheading }}</p>
			{% if include.details.button_link_url %}
				{% bookshop button 
					label=include.details.button_label
					variant=include.details.button_variant
					link_url=include.details.button_link_url %}
			{% endif %}
		</div>
	{% endif %}
	<div class="{{c}}__items
				{% if include.details.show_details %}
				{{c}}__items--with-details
					{% if item_number < 3 %}
					{{c}}__items--with-details-stacked
					{% endif %}
				{% endif %}
				{% if include.image_borders %}
				{{c}}__items--bordered
				{% endif %}
				{% if include.details.show_details == false %}
					{{c}}__items--full-size
				{% endif %}">
		{% for item in include.gallery_items %}
			{% if item.link_url %}
				<a class="{{c}}__item {{c}}__item--link"
				   href="{{ item.link_url }}">
				    <div class="{{c}}__spacer"></div>
					<img src="{{ item.image }}" alt="{{ item.image_title }}" />
					<div class="{{c}}__item-details">
						<p class="{{c}}__title">{{ item.image_title }}</p>
						<p class="{{c}}__caption">{{ item.image_caption }}</p>
					</div>
				</a>
			{% else %}
				<div class="{{c}}__item">
				    <div class="{{c}}__spacer"></div>
					<img src="{{ item.image }}" alt="{{ item.image_title }}" />
					<div class="{{c}}__item-details">
						<p class="{{c}}__title">{{ item.image_title }}</p>
						<p class="{{c}}__caption">{{ item.image_caption }}</p>
					</div>
				</div>
			{% endif %}
		{% endfor %}
	</div>
</div>`,ye["components/header-with-image/header-with-image.jekyll.html"]='<div class="{{c}}__inner-wrapper\n\t\t\t{{c}}__inner-wrapper--{{ include.content_alignment | slugify }}\n\t\t\tcomponent">\n\t<div class="{{c}}__content-wrapper">\n\t\t<div class="{{c}}__heading"\n\t\t\t style="color: {{ include.text_color }}">{{ include.heading_html }}</div>\n\t\t<div class="{{c}}__subheading"\n\t\t\t style="color: {{ include.text_color }}">{{ include.subheading_html }}</div>\n\t\t{% if include.button_link_url %}\n\t\t\t{% bookshop button \n\t\t\t\t\t\tlabel=include.button_label\n\t\t\t\t\t\tvariant=include.button_variant\n\t\t\t\t\t\tlink_url=include.button_link_url %}\n\t\t{% endif %}\n\t</div>\n\t{% if include.image %}\n\t\t<div class="{{c}}__image-wrapper">\n\t\t\t<img src="{{ include.image }}" alt="{{ include.heading }}" />\n\t\t</div>\n\t{% endif %}\n</div>',ye["components/image-and-text-blocks/image-and-text-blocks.jekyll.html"]='<div class="{{c}}__inner-wrapper\n\t\t\tcomponent">\n\t{% for block in include.blocks %}\n\t\t<div class="{{c}}__block\n\t\t\t\t\t{{c}}__block--{{ block.content_arrangement | slugify }}">\n\t\t\t<div class="{{c}}__content-wrapper">\n\t\t\t\t<div class="{{c}}__heading">\n\t\t\t\t\t{{ block.heading_html }}\n\t\t\t\t</div>\n\t\t\t\t<div class="{{c}}__content">\n\t\t\t\t\t{{ block.content_html }}\n\t\t\t\t\t{% if block.button.button_label %}\n\t\t\t\t\t\t{% bookshop button \n\t\t\t\t\t\t\t\t\tlabel=block.button.button_label\n\t\t\t\t\t\t\t\t\tvariant=block.button.button_variant\n\t\t\t\t\t\t\t\t\tlink_url=block.button.button_link_url %}\n\t\t\t\t\t{% endif %}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="{{c}}__image-wrapper">\n\t\t\t\t<img src="{{ block.image }}" alt="{{ block.heading_html | strip_html }}" />\n\t\t\t</div>\n\t\t</div>\n\t{% endfor %}\n</div>',ye["components/map/map.jekyll.html"]='<div class="{{c}}__inner-wrapper">\n\t<div class="{{c}}__map" id="map"></div>\n\t<script type="text/javascript">\n\n\t\twindow.mapData = {"latitude": {{ include.map.latitude }},"longitude": {{ include.map.longitude }}, "zoom": {{ include.map.zoom}}};\n\n\t\tfunction initMap() {\n\t\t\tvar myOptions = {\n\t\t\t\tscrollwheel: false,\n\t\t\t\tdraggable: false,\n\t\t\t\tpanControl: false,\n\t\t\t\tdisableDefaultUI: true,\n\t\t\t\tstyles: [{\n\t\t\t\t\t"featureType": "all",\n\t\t\t\t\t"elementType": "labels.text.fill",\n\t\t\t\t\t"stylers": [{\n\t\t\t\t\t\t"saturation": 36\n\t\t\t\t\t}, {\n\t\t\t\t\t\t"color": "#000000"\n\t\t\t\t\t}, {\n\t\t\t\t\t\t"lightness": 40\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\t"featureType": "all",\n\t\t\t\t\t"elementType": "labels.text.stroke",\n\t\t\t\t\t"stylers": [{\n\t\t\t\t\t\t"visibility": "on"\n\t\t\t\t\t}, {\n\t\t\t\t\t\t"color": "#000000"\n\t\t\t\t\t}, {\n\t\t\t\t\t\t"lightness": 16\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\t"featureType": "all",\n\t\t\t\t\t"elementType": "labels.icon",\n\t\t\t\t\t"stylers": [{\n\t\t\t\t\t\t"visibility": "off"\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\t"featureType": "administrative",\n\t\t\t\t\t"elementType": "geometry.fill",\n\t\t\t\t\t"stylers": [{\n\t\t\t\t\t\t"color": "#000000"\n\t\t\t\t\t}, {\n\t\t\t\t\t\t"lightness": 20\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\t"featureType": "administrative",\n\t\t\t\t\t"elementType": "geometry.stroke",\n\t\t\t\t\t"stylers": [{\n\t\t\t\t\t\t"color": "#000000"\n\t\t\t\t\t}, {\n\t\t\t\t\t\t"lightness": 17\n\t\t\t\t\t}, {\n\t\t\t\t\t\t"weight": 1.2\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\t"featureType": "landscape",\n\t\t\t\t\t"elementType": "geometry",\n\t\t\t\t\t"stylers": [{\n\t\t\t\t\t\t"color": "#000000"\n\t\t\t\t\t}, {\n\t\t\t\t\t\t"lightness": 20\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\t"featureType": "poi",\n\t\t\t\t\t"elementType": "geometry",\n\t\t\t\t\t"stylers": [{\n\t\t\t\t\t\t"color": "#000000"\n\t\t\t\t\t}, {\n\t\t\t\t\t\t"lightness": 21\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\t"featureType": "road.highway",\n\t\t\t\t\t"elementType": "geometry.fill",\n\t\t\t\t\t"stylers": [{\n\t\t\t\t\t\t"color": "#000000"\n\t\t\t\t\t}, {\n\t\t\t\t\t\t"lightness": 17\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\t"featureType": "road.highway",\n\t\t\t\t\t"elementType": "geometry.stroke",\n\t\t\t\t\t"stylers": [{\n\t\t\t\t\t\t"color": "#000000"\n\t\t\t\t\t}, {\n\t\t\t\t\t\t"lightness": 29\n\t\t\t\t\t}, {\n\t\t\t\t\t\t"weight": 0.2\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\t"featureType": "road.arterial",\n\t\t\t\t\t"elementType": "geometry",\n\t\t\t\t\t"stylers": [{\n\t\t\t\t\t\t"color": "#000000"\n\t\t\t\t\t}, {\n\t\t\t\t\t\t"lightness": 18\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\t"featureType": "road.local",\n\t\t\t\t\t"elementType": "geometry",\n\t\t\t\t\t"stylers": [{\n\t\t\t\t\t\t"color": "#000000"\n\t\t\t\t\t}, {\n\t\t\t\t\t\t"lightness": 16\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\t"featureType": "transit",\n\t\t\t\t\t"elementType": "geometry",\n\t\t\t\t\t"stylers": [{\n\t\t\t\t\t\t"color": "#000000"\n\t\t\t\t\t}, {\n\t\t\t\t\t\t"lightness": 19\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\t"featureType": "water",\n\t\t\t\t\t"elementType": "geometry",\n\t\t\t\t\t"stylers": [{\n\t\t\t\t\t\t"color": "#000000"\n\t\t\t\t\t}, {\n\t\t\t\t\t\t"lightness": 17\n\t\t\t\t\t}]\n\t\t\t\t}],\n\t\t\t\tzoom: window.mapData.zoom,\n\t\t\t\tmaxZoom: window.mapData.zoom,\n\t\t\t\tminZoom: window.mapData.zoom,\n\t\t\t\tcenter: new google.maps.LatLng(window.mapData.latitude, window.mapData.longitude),\n\t\t\t\tmapTypeId: google.maps.MapTypeId.ROADMAP\n\t\t\t};\n\t\t\tmap = new google.maps.Map(document.getElementById("map"), myOptions);\n\t\t\tmarker = new google.maps.Marker({\n\t\t\t\tmap: map,\n\t\t\t\tposition: new google.maps.LatLng(window.mapData.latitude, window.mapData.longitude)\n\t\t\t});\n\n\t\t\tgoogle.maps.event.addDomListener(window, "resize", function () {\n\t\t\t\tmap.setCenter(myOptions.center);\n\t\t\t});\n\t\t}\n\t<\/script>\n\t<script async defer src="https://maps.googleapis.com/maps/api/js?key={{ include.google_maps_api_key }}&amp;callback=initMap"><\/script>\n</div>',ye["components/page-heading/page-heading.jekyll.html"]='<div class="{{c}}__inner-wrapper\n\t\t\tcomponent">\n\t<h2 class="{{c}}__heading">{{ include.heading }}</h2>\n\t<p class="{{c}}__subheading">{{ include.subheading }}</p>\n</div>\n',ye["components/page/page.jekyll.html"]=`{% if include.content_blocks.size > 0 %}
    <div class="c-page theme-{{ include.page_theme | slugify | default: 'dark' }}">

    {% assign block_count = 0 %}
    {% for block in include.content_blocks %}
        {% assign c = block._bookshop_name | prepend: 'c-' %}
        <div class="{{c}} 
                    component-wrapper
                    {% if block.component_theme %}
                        component-wrapper--{{ block.component_theme | slugify }}
                    {% else %}
                        component-wrapper--light
                    {% endif %}">
            {% bookshop {{block._bookshop_name}} bind=block %}
        </div>
        {% assign block_count = block_count | plus: 1 %}
    {% endfor %}

    </div>
{% endif %}`,ye["components/post-header/post-header.jekyll.html"]='{% if include.nested %}\n\t{% assign c = "n-post-header" %}\n{% endif %}\n<div class="{{c}}__inner-wrapper">\n\t<h3 class="{{c}}__heading\n\t\t\t   {% if include.title %}\n\t\t\t   \t   {{c}}__heading--title\n\t\t\t   {% endif %}">\n\t\t\t   {% unless include.post.title == page.title %}\n\t\t\t\t   <a href="{{ include.post.url }}">{{ include.post.title }}</a>\n\t\t\t   {% else %}\n\t\t\t   \t\t{{ include.post.title }}\n\t\t\t   {% endunless %}\n\t</h3>\n\t<div class="{{c}}__post-info">\n\t\t<div class="{{c}}__categories">\n\t\t\t{% for category in include.post.categories %}\n\t\t\t\t<span class="{{c}}__category">\n\t\t\t\t\t<a href="/category/{{ category | slugify }}">{{ category | capitalize }}</a>\n\t\t\t\t</span>\n\t\t\t{% endfor %}\n\t\t</div>\n\t\t<span class="{{c}}__date">{{ include.post.date | date_to_long_string }}</span>\n\t</div>\n\t{% assign author_id = include.post.author_staff_member | prepend: "/staff_members/" | append: "/" %}\n\t{% assign author = site.staff_members | where: "url", author_id | first %}\n\t<div class="{{c}}__author">\n\t\t<img src="{{ author.image }}" alt="Photo of {{ author.name }}" width="30" height="30">\n\t\t<span>{{ author.name }}</span>\n\t</div>\n</div>',ye["components/post-navigation/post-navigation.jekyll.html"]='{% assign c = "c-post-navigation" %}\n<div class="{{c}}__inner-wrapper">\n\t{% if page.previous.url %}\n\t\t<a class="{{c}}__option\n\t\t\t\t  {{c}}__option--prev" \n\t\t\thref="{{ page.previous.url }}">&laquo; {{ page.previous.title }}</a>\n\t{% endif %}\n\t{% if page.next.url %}\n\t\t<a class="{{c}}__option\n\t\t\t\t  {{c}}__option--next" \n\t\t\thref="{{ page.next.url }}">{{ page.next.title }} &raquo;</a>\n\t{% endif %}\n\n\t<div class="{{c}}__next-preview">\n\t\t<h2 class="{{c}}__heading">Keep Reading</h2>\n\t\t{% if page.next %}\n\t\t\t{% bookshop post-preview post=page.next %}\n\t\t{% elsif page.previous %}\n\t\t\t{% bookshop post-preview post=page.previous %}\n\t\t{% endif %}\n\t</div>\n</div>',ye["components/post-preview/post-preview.jekyll.html"]=`{% assign n = 'n-post-preview' %}
<div class="{{n}}__inner-wrapper">
	<div class="{{n}}__top">
		<img class="{{n}}__preview-image" src="{{ include.post.SEO_options.image }}" alt="{{ include.post.title }} image" />
		{% bookshop post-header 
			nested=true
			post=include.post %}
	</div>
	<div class="{{n}}__content">
		{{ include.post.excerpt }}
	</div>

	{% bookshop button 
				label="Read More"
				variant="Filled"
				link_url=include.post.url %}
</div>`,ye["components/posts-list/posts-list.jekyll.html"]='{% assign c = "c-posts-list" %}\n{% if include.show_posts %}\n\t<div class="{{c}}__inner-wrapper">\n\t\t{% if include.heading %}\n\t\t\t<h2 class="{{c}}__heading">{{ include.heading }}</h2>\n\t\t{% endif %}\n\t\t{% if include.content_text %}\n\t\t\t<p class="{{c}}__content">{{ include.content_text }}</p>\n\t\t{% endif %}\n\n\t\t{% unless include.tag %}\n\t\t\t{% assign posts = site.posts %}\n\t\t{% else %}\n\t\t\t{% assign posts = site.posts | where_exp:"post", "post.categories contains include.tag" %}\n\t\t{% endunless %}\n\n\t\t{% for post in posts %}\n\t\t\t{% bookshop post-preview post=post %}\n\t\t{% endfor %}\n\t</div>\n{% endif %}\n',ye["components/pricing-plans/pricing-plans.jekyll.html"]='<div class="{{c}}__inner-wrapper\n\t\t\tcomponent">\n\t<h2 class="{{c}}__heading">{{ include.heading }}</h2>\n\t<p class="{{c}}__subheading">{{ include.subheading }}</p>\n\t<div class="{{c}}__plans">\n\t\t{% for plan in include.plans %}\n\t\t\t<div class="{{c}}__card">\n\t\t\t\t<h3 class="{{c}}__title"\n\t\t\t\t\tstyle="background-color: {{ plan.card_color }}">{{ plan.title }}</h3>\n\t\t\t\t<ul class="{{c}}__features">\n\t\t\t\t\t<li>{{ plan.price }}</li>\n\t\t\t\t\t{% for item in plan.features %}\n\t\t\t\t\t\t<li>{{ item.feature }}</li>\n\t\t\t\t\t{% endfor %}\n\t\t\t\t</ul>\n\t\t\t\t<a class="{{c}}__button"\n\t\t\t\t   href="{{ plan.button_url }}"\n\t\t\t\t   style="background-color: {{ plan.card_color }}">Get started →</a>\n\t\t\t</div>\n\t\t{% endfor %}\n\t</div>\n</div>\n',ye["components/quote/quote.jekyll.html"]='<div class="{{c}}__inner-wrapper\n\t\t\tcomponent">\n\t<div class="{{c}}__image-wrapper">\n\t\t<img src="{{ include.image }}" alt="{{ include.name }}" />\n\t\t<p class="{{c}}__quote-details {{c}}__quote-details--alternate">{{ include.name }}{% if include.role %} - {{ include.role }}{% endif %}</p>\n\t</div>\n\t<div class="{{c}}__content-wrapper">\n\t\t<p class="{{c}}__quote">{{ include.quote_text }}</p>\n\t\t<p class="{{c}}__quote-details">{{ include.name }} - {{ include.role }}</p>\n\t</div>\n</div>',ye["components/reviews/reviews.jekyll.html"]='<div class="{{c}}__inner-wrapper\n\t\t\tcomponent">\n\t<div class="{{c}}__content-wrapper">\n\t\t{% if include.heading %}\n\t\t\t<h2 class="{{c}}__heading">{{ include.heading }}</h2>\n\t\t{% endif %}\n\t\t{{ include.content_html }}\n\t</div>\n\t<div class="{{c}}__reviews">\n\t\t{% for review in include.reviews %}\n\t\t\t<div class="{{c}}__review">\n\t\t\t\t<div class="{{c}}__review-content">\n\t\t\t\t\t<p>{{ review.review_text }}</p>\n\t\t\t\t</div>\n\t\t\t\t<div class="{{c}}__review-name">\n\t\t\t\t\t<img src="{{ review.image }}" alt="{{ review.name }}" /><span>{{ review.name }}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{% endfor %}\n\t</div>\n</div>',ye["components/services/services.jekyll.html"]='<div class="{{c}}__inner-wrapper\n\t\t\tcomponent">\n\t<h2 class="{{c}}__heading">{{ include.heading }}</h2>\n\t<p class="{{c}}__description">{{ include.description_text }}</p>\n\n\t<div class="{{c}}__services">\n\t\t{% for service in include.services %}\n\t\t\t<div class="{{c}}__service">\n\t\t\t\t<h3 class="{{c}}__title">{{ service.title }}</h3>\n\t\t\t\t<div class="{{c}}__content">\n\t\t\t\t\t{{ service.description_html }}\n\t\t\t\t</div>\n\t\t\t\t<img src="{{ service.image }}" alt="{{ service.title }} image" />\n\t\t\t</div>\n\t\t{% endfor %}\n\t</div>\n</div>',ye["components/staff-list/staff-list.jekyll.html"]='{% if include.show_staff %}\n\t<div class="{{c}}__inner-wrapper\n\t\t\t\tcomponent">\n\t\t<h2 class="{{c}}__heading">{{ include.heading }}</h2>\n\t\t<p class="{{c}}__subheading">{{ include.subheading }}</p>\n\t\t<div class="{{c}}__staff">\n\t\t\t{% for member in site.staff_members %}\n\t\t\t\t<div class="{{c}}__staff-card">\n\t\t\t\t\t<img class="{{c}}__staff-image" \n\t\t\t\t\t\t src="{{ member.image }}"\n\t\t\t\t\t\t alt="{{ member.name }}" />\n\t\t\t\t\t<h4 class="{{c}}__name">\n\t\t\t\t\t\t<a href="https://twitter.com/{{ member.twitter }}">{{ member.name }}</a>\n\t\t\t\t\t</h4>\n\t\t\t\t\t<p class="{{c}}__position">{{ member.position }}</p>\n\t\t\t\t</div>\n\t\t\t{% endfor %}\n\t\t</div>\n\t</div>\n{% endif %}\n',ye["components/statistics/statistics.jekyll.html"]='<div class="{{c}}__inner-wrapper\n\t\t\tcomponent">\n\t{% if include.heading %}\n\t\t<h2 class="{{c}}__main-heading">{{ include.heading }}</h2>\n\t{% endif %}\n\t<div class="{{c}}__grid">\n\t\t{% for stat in include.statistics %}\n\t\t\t<div class="{{c}}__stat">\n\t\t\t\t<div class="{{c}}__content-wrapper">\n\t\t\t\t\t<div class="{{c}}__icon">\n\t\t\t\t\t\t<img src="{{ stat.icon_image }}" alt="{{ stat.title }}" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="{{c}}__content">\n\t\t\t\t\t\t<h3 class="{{c}}__heading">{{ stat.heading}}</h3>\n\t\t\t\t\t\t<p class="{{c}}__text">{{ stat.text }}</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{% endfor %}\n\t</div>\n</div>',ye["components/updates/updates.jekyll.html"]='<div class="{{c}}__inner-wrapper\n\t\t\tcomponent">\n\t<h2 class="{{c}}__heading">{{ include.heading }}</h2>\n\t<div class="{{c}}__wrapper">\n\t\t{% for update in include.updates %}\n\t\t\t<div class="{{c}}__update">\n\t\t\t\t<img src="{{ update.image }}" alt="{{ update.title }}" />\n\t\t\t\t<div class="{{c}}__content-wrapper">\n\t\t\t\t\t<p class="{{c}}__date">{{ update.date | date: "%B %-d, %Y" }}</p>\n\t\t\t\t\t<p class="{{c}}__title">{{ update.title }}</p>\n\t\t\t\t\t<p class="{{c}}__content">{{ update.content_text }}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{% endfor %}\n\t</div>\n</div>\n';var sn,l=ye,ye=[];ye.push(new class{constructor(t){t={name:"Jekyll",files:{},...t},this.key="jekyll",this.name=t.name,this.files=t.files,this.plugins=t.plugins||[],this.plugins.push(We,Ke,Xe,en,nn,Je,tn),this.initializeLiquid(),this.applyLiquidPlugins()}initializeLiquid(){const e=this;this.liquid=new Ve({fs:{readFileSync(t){return"LiquidJS readFileSync unimplemented"},async readFile(t){return e.retrieveInclude(t)},existsSync(){return!0},async exists(){return!0},resolve(t,e,n){return""+t+e}}})}async retrieveInclude(t){let e;return e=/_bookshop_include_/.test(t)?this.getShared(t.replace(/^.*_bookshop_include_/,"")):/_bookshop_/.test(t)?this.getComponent(t.replace(/^.*_bookshop_/,"")):this.files?.[t],e||""===e?Ye(e,{isInclude:!0}):(console.warn("[jekyll-engine] No file found for "+t),"")}applyLiquidPlugins(){this.plugins.forEach(t=>{this.liquid.plugin(t)})}getShared(t){return this.files?.[`shared/jekyll/${t}.jekyll.html`]}getComponentKey(t){var e=t.split("/").reverse()[0];return`components/${t}/${e}.jekyll.html`}getComponent(t){t=this.getComponentKey(t);return this.files?.[t]}hasComponent(t){t=this.getComponentKey(t);return!!this.files?.[t]}resolveComponentType(t){return this.getComponent(t)?"component":!!this.getShared(t)&&"shared"}async render(t,e,n,i){let s=this.getComponent(e);if(s=s||this.getShared(e),!s)return console.warn("[jekyll-engine] No component found for "+e),"";s=Ye(s,{}),n={...i=!i||"object"!=typeof i?{}:i,include:n},t.innerHTML=await this.liquid.parseAndRender(s||"",n)}async eval(e,n=[{}]){try{const r=new st;Array.isArray(n)?n.forEach(t=>r.push(t)):r.push(n);var[,i,s]=e.match(/^(.*?)(?:\[(\d+)\])?$/);let t=await this.liquid.evalValue(i,r);return s&&"object"==typeof t&&!Array.isArray(t)&&(t=Object.entries(t)),s?t?.[s]:t}catch(t){return console.error("Error evaluating "+e,t),""}}loader(){}}({plugins:[],files:l})),window.BookshopLive=(sn=ye,class{constructor(t){this.engines=sn,this.elements=[],this.globalData={},this.data={},this.renderOptions={},this.pendingRender=!1,this.awaitingDataFetches=t?.remoteGlobals?.length||0,t?.remoteGlobals?.forEach(this.fetchGlobalData.bind(this))}async fetchGlobalData(t){try{const n=await fetch(t);var e=await n.json();Object.assign(this.globalData,e),--this.awaitingDataFetches}catch(t){--this.awaitingDataFetches}this.awaitingDataFetches<=0&&this.pendingRender&&await this.render()}readElement(t){return{dom:t,originalHTML:t.innerHTML,componentName:t.dataset.bookshopLive,componentPropSource:t.dataset.bookshopProps}}resolveComponentType(t){return this.engines[0].resolveComponentType(t)}async renderElement(e,t,n,i){try{await this.engines[0].render(i,e,t,{...this.globalData,...n})}catch(t){console.warn("Error rendering bookshop component "+e,t),console.warn("This is expected in certain cases, and may not be an issue, especially when deleting or re-ordering components.")}}async eval(t,e){return this.engines[0].eval(t,e)}async update(t,e){this.data=t,this.renderOptions=e,0<this.awaitingDataFetches?this.pendingRender=!0:await this.render()}async render(){var t,e,n,i;const s={editorLinks:"undefined"==typeof window||"undefined"!=typeof window&&window.CloudCannon?.refreshInterface,...this.renderOptions};"undefined"!=typeof window&&!1===window.bookshopEditorLinks&&(s.editorLinks=!1);for({startNode:t,endNode:e,output:n,pathStack:i}of await(async(o,t)=>{const l=document.implementation.createHTMLDocument(),c=[];return await k(o,t,null,async({startNode:t,endNode:e,name:n,scope:i,bindings:s,pathStack:r})=>{var a=l.createElement("div");await o.renderElement(n,i,s,a),c.push({startNode:t,endNode:e,output:a,pathStack:r,scope:i,name:n})}),c})(this,document))s.editorLinks&&await(async(t,e,n,i,s)=>{const r=e.ownerDocument,a=[];e.prepend(i),e.append(s),r.body.appendChild(e);var o,l,c,h,d,u;await k(t,e,n,async t=>{a.push(t)});for({startNode:o,endNode:l,params:c,pathStack:h,scope:d,name:u}of a){var p="component"===t.resolveComponentType(u);if(d?.editorLink??d?.editor_link??d?._editorLink??d?._editor_link??p){let e=null;for(var[,f]of c){const m=g(f,h)??f;if(b(t.data,m)){e=m.replace(/^page(\.|$)/,"");break}}if(e){let t=o.nextElementSibling;for(;t&&0!=(t.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_FOLLOWING);)t.dataset.cmsEditorLink="cloudcannon:#"+e,t=t.nextElementSibling}}}i.remove(),s.remove(),e.remove()})(this,n,i,t.cloneNode(),e.cloneNode()),((t,e)=>{let n=t.nextSibling,i="";for(;n&&0!=(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING);){switch(n.nodeType){case Node.ELEMENT_NODE:i+=n.outerHTML;break;case Node.COMMENT_NODE:i+=`<!--${n.textContent}-->`;break;default:i+=n.textContent||""}n=n.nextSibling}return i})(t,e)!==n.innerHTML&&((t,e,n)=>{let i=t.nextSibling;for(;i&&0!=(i.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING);){var s=i.nextSibling;i.remove(),i=s}for(;n.childNodes.length;)e.parentNode.insertBefore(n.childNodes[0],e)})(t,e,n)}})})();